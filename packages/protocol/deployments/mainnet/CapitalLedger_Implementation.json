{
  "address": "0xb835f5351D32ba0eaD26b78a391306d5C55b20Eb",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract Context",
          "name": "_context",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "IndexGreaterThanTokenSupply",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        }
      ],
      "name": "InvalidAsset",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "enum CapitalAssetType",
          "name": "",
          "type": "uint8"
        }
      ],
      "name": "InvalidAssetType",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "assetTokenId",
          "type": "uint256"
        }
      ],
      "name": "InvalidAssetWithId",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "epoch",
          "type": "uint256"
        }
      ],
      "name": "InvalidDepositEpoch",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidOwnerIndex",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "requested",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "max",
          "type": "uint256"
        }
      ],
      "name": "InvalidWithdrawAmount",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "NotGoListed",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "resource",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "accessor",
          "type": "address"
        }
      ],
      "name": "RequiresOperator",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroAddress",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroDeposit",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "assetTokenId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "usdcEquivalent",
          "type": "uint256"
        }
      ],
      "name": "CapitalERC721Deposit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        }
      ],
      "name": "CapitalERC721Harvest",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "depositTimestamp",
          "type": "uint256"
        }
      ],
      "name": "CapitalERC721Withdrawal",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "usdcEquivalent",
          "type": "uint256"
        }
      ],
      "name": "CapitalPositionAdjustment",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "assetAddressOf",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "addr",
          "type": "address"
        }
      ],
      "name": "balanceOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "assetTokenId",
          "type": "uint256"
        }
      ],
      "name": "depositERC721",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "erc721IdOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "harvest",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "onERC721Received",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "ownerOf",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "positions",
      "outputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "ownedIndex",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "assetAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "usdcEquivalent",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "depositTimestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "tokenByIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "tokenOfOwnerByIndex",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalSupply",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "addr",
          "type": "address"
        }
      ],
      "name": "totalsOf",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "eligibleAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "positionId",
          "type": "uint256"
        }
      ],
      "name": "withdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0xf53ce14b91af18b918c4f94befe31bab6d1ab979964fa297e64aba774880b78d",
  "receipt": {
    "to": null,
    "from": "0xfc596F30cEDE6fcd54c8e978058e8e94E3B41DA6",
    "contractAddress": "0xb835f5351D32ba0eaD26b78a391306d5C55b20Eb",
    "transactionIndex": 50,
    "gasUsed": "2388351",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x58d3e46d648070198828a0b29cd5185113db19a8e908921626d990c2432185f3",
    "transactionHash": "0xf53ce14b91af18b918c4f94befe31bab6d1ab979964fa297e64aba774880b78d",
    "logs": [],
    "blockNumber": 16701346,
    "cumulativeGasUsed": "7710492",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xd16BC944Bf20c86c4ED47Ce1a330a18538674C83"
  ],
  "numDeployments": 3,
  "solcInputHash": "8fe04c0478aeae2f7ad576066908884e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.16+commit.07a7930e\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"contract Context\",\"name\":\"_context\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"IndexGreaterThanTokenSupply\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"}],\"name\":\"InvalidAsset\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"enum CapitalAssetType\",\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"InvalidAssetType\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"assetTokenId\",\"type\":\"uint256\"}],\"name\":\"InvalidAssetWithId\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"epoch\",\"type\":\"uint256\"}],\"name\":\"InvalidDepositEpoch\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidOwnerIndex\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"requested\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"max\",\"type\":\"uint256\"}],\"name\":\"InvalidWithdrawAmount\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"NotGoListed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"resource\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"accessor\",\"type\":\"address\"}],\"name\":\"RequiresOperator\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroDeposit\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"assetTokenId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"usdcEquivalent\",\"type\":\"uint256\"}],\"name\":\"CapitalERC721Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"}],\"name\":\"CapitalERC721Harvest\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"depositTimestamp\",\"type\":\"uint256\"}],\"name\":\"CapitalERC721Withdrawal\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"usdcEquivalent\",\"type\":\"uint256\"}],\"name\":\"CapitalPositionAdjustment\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"assetAddressOf\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"assetTokenId\",\"type\":\"uint256\"}],\"name\":\"depositERC721\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"erc721IdOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"harvest\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"name\":\"onERC721Received\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"positions\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"ownedIndex\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"assetAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"usdcEquivalent\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"depositTimestamp\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"tokenByIndex\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"tokenOfOwnerByIndex\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"totalsOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"eligibleAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"positionId\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Goldfinch\",\"kind\":\"dev\",\"methods\":{\"assetAddressOf(uint256)\":{\"params\":{\"positionId\":\"id of the position\"},\"returns\":{\"_0\":\"asset address of the position\"}},\"balanceOf(address)\":{\"params\":{\"addr\":\"address\"},\"returns\":{\"_0\":\"positions held by address\"}},\"depositERC721(address,address,uint256)\":{\"details\":\"reverts with InvalidAssetType if `assetAddress` is not an ERC721\",\"params\":{\"assetAddress\":\"address of the ERC20 address\",\"assetTokenId\":\"id of the ERC721 asset to add\",\"owner\":\"address that owns the position\"},\"returns\":{\"_0\":\"id of the newly created position\"}},\"erc721IdOf(uint256)\":{\"details\":\"reverts with InvalidAssetType if `assetAddress` is not an ERC721\",\"params\":{\"positionId\":\"id of the position\"},\"returns\":{\"_0\":\"id of the underlying ERC721 asset\"}},\"harvest(uint256)\":{\"params\":{\"positionId\":\"id of the position\"}},\"onERC721Received(address,address,uint256,bytes)\":{\"details\":\"Whenever an {IERC721} `tokenId` token is transferred to this contract via {IERC721-safeTransferFrom} by `operator` from `from`, this function is called. It must return its Solidity selector to confirm the token transfer. If any other value is returned or the interface is not implemented by the recipient, the transfer will be reverted. The selector can be obtained in Solidity with `IERC721.onERC721Received.selector`.\"},\"ownerOf(uint256)\":{\"params\":{\"positionId\":\"id of the position\"},\"returns\":{\"_0\":\"owner of the position\"}},\"tokenByIndex(uint256)\":{\"details\":\"Returns a position ID at a given `index` of all the positions stored by the contract.use with {totalSupply} to enumerate all positions\",\"params\":{\"index\":\"index to get the position ID at\"},\"returns\":{\"_0\":\"position id\"}},\"tokenOfOwnerByIndex(address,uint256)\":{\"details\":\"use with {balanceOf} to enumerate all of `owner`'s positions\",\"params\":{\"index\":\"index of the owner's balance to get the position ID of\",\"owner\":\"owner of the positions\"},\"returns\":{\"_0\":\"position id\"}},\"totalSupply()\":{\"returns\":{\"_0\":\"number of positions in the ledger\"}},\"totalsOf(address)\":{\"details\":\"this is used by Membership to determine how much is eligible in  the current epoch vs the next epoch.\",\"params\":{\"owner\":\"address owning the positions\"},\"returns\":{\"eligibleAmount\":\"USDC value of positions eligible for rewards\",\"totalAmount\":\"total USDC value of positions\"}},\"withdraw(uint256)\":{\"params\":{\"positionId\":\"id of the position\"}}},\"title\":\"CapitalLedger\",\"version\":1},\"userdoc\":{\"errors\":{\"IndexGreaterThanTokenSupply()\":[{\"notice\":\"Thrown when querying token supply with an index greater than the supply\"}],\"InvalidAsset(address)\":[{\"notice\":\"Thrown when an asset has been requested that does not exist\"}],\"InvalidAssetType(uint8)\":[{\"notice\":\"Thrown when called with an invalid asset type for the function. Valid types are defined under CapitalAssetType\"}],\"InvalidAssetWithId(address,uint256)\":[{\"notice\":\"Thrown when an asset has been requested that does not exist\"}],\"InvalidOwnerIndex()\":[{\"notice\":\"Thrown when depositing from address(0)\"}],\"InvalidWithdrawAmount(uint256,uint256)\":[{\"notice\":\"Thrown when withdrawing an invalid amount for a position\"}],\"NotGoListed(address)\":[{\"notice\":\"Thrown when trying to harvest a pool token when not go-listed\"}],\"ZeroDeposit()\":[{\"notice\":\"Thrown when attempting to deposit nothing\"}]},\"events\":{\"CapitalERC721Deposit(address,address,uint256,uint256,uint256)\":{\"notice\":\"Emitted when a new capital erc721 deposit has been made\"},\"CapitalERC721Harvest(uint256,address)\":{\"notice\":\"Emitted when an ERC721 capital asset has been harvested\"},\"CapitalERC721Withdrawal(address,uint256,address,uint256)\":{\"notice\":\"Emitted when a new ERC721 capital withdrawal has been made\"},\"CapitalPositionAdjustment(uint256,address,uint256)\":{\"notice\":\"Emitted when an ERC721 capital asset has been \\\"kicked\\\", which may cause the underlying  usdc equivalent value to change.\"}},\"kind\":\"user\",\"methods\":{\"assetAddressOf(uint256)\":{\"notice\":\"Get the asset address of the position. Example: For an ERC721 position, this  returns the address of that ERC721 contract.\"},\"balanceOf(address)\":{\"notice\":\"Get the number of capital positions held by an address\"},\"constructor\":{\"notice\":\"Construct the contract\"},\"depositERC721(address,address,uint256)\":{\"notice\":\"Account for a deposit of `id` for the ERC721 asset at `assetAddress`.\"},\"erc721IdOf(uint256)\":{\"notice\":\"Get the id of the ERC721 asset held by position `id`. Pair this with  `assetAddressOf` to get the address & id of the nft.\"},\"harvest(uint256)\":{\"notice\":\"Harvests the associated rewards, interest, and other accrued assets  associated with the asset token. For example, if given a PoolToken asset,  this will collect the GFI rewards (if available), redeemable interest, and  redeemable principal, and send that to the `owner`.\"},\"ownerOf(uint256)\":{\"notice\":\"Get the owner of a given position.\"},\"positions(uint256)\":{\"notice\":\"Data for positions in the vault. Always has a corresponding entry at the same index in ERC20Data or ERC721 data, but never both.\"},\"tokenOfOwnerByIndex(address,uint256)\":{\"notice\":\"Returns a position ID owned by `owner` at a given `index` of its position list\"},\"totalSupply()\":{\"notice\":\"Total number of positions in the ledger\"},\"totalsOf(address)\":{\"notice\":\"Get the USDC value of `owner`s positions, reporting what is currently  eligible and the total amount.\"},\"withdraw(uint256)\":{\"notice\":\"Completely withdraw a position\"}},\"notice\":\"Track Capital held by owners and ensure the Capital has been accounted for.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/protocol/core/membership/CapitalLedger.sol\":\"CapitalLedger\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":100},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../token/ERC20/IERC20Upgradeable.sol\\\";\\n\",\"keccak256\":\"0xe6220d2b5a54ac7497313ce4503cca742b09dc5e3a4eb76fb0afff85b1b97a34\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/interfaces/IERC721ReceiverUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../token/ERC721/IERC721ReceiverUpgradeable.sol\\\";\\n\",\"keccak256\":\"0x3e21867e3704f4f13d3b9c66e4f8a39a61ab7c5519acd09cb8bbd32d6280d0e6\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../token/ERC721/IERC721Upgradeable.sol\\\";\\n\",\"keccak256\":\"0x28c8a2c5850343f4fb44847b736df5a89fb16c90971c8c06c8066c04ad9b70df\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since a proxied contract can't have a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n */\\nabstract contract Initializable {\\n    /**\\n     * @dev Indicates that the contract has been initialized.\\n     */\\n    bool private _initialized;\\n\\n    /**\\n     * @dev Indicates that the contract is in the process of being initialized.\\n     */\\n    bool private _initializing;\\n\\n    /**\\n     * @dev Modifier to protect an initializer function from being invoked twice.\\n     */\\n    modifier initializer() {\\n        require(_initializing || !_initialized, \\\"Initializable: contract is already initialized\\\");\\n\\n        bool isTopLevelCall = !_initializing;\\n        if (isTopLevelCall) {\\n            _initializing = true;\\n            _initialized = true;\\n        }\\n\\n        _;\\n\\n        if (isTopLevelCall) {\\n            _initializing = false;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x8b2abd85d0ece7e866e100e9d47ca9cbec93c87cf71a8d267b2b93eb81f7d5e9\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC20/IERC20Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20Upgradeable {\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `recipient`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `sender` to `recipient` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address sender,\\n        address recipient,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0xf449ca0a763d4b1b4462cf8706857074492f324020a2b9d099181b5383055ad3\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC20/utils/SafeERC20Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC20Upgradeable.sol\\\";\\nimport \\\"../../../utils/AddressUpgradeable.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20Upgradeable {\\n    using AddressUpgradeable for address;\\n\\n    function safeTransfer(\\n        IERC20Upgradeable token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));\\n    }\\n\\n    function safeTransferFrom(\\n        IERC20Upgradeable token,\\n        address from,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transferFrom.selector, from, to, value));\\n    }\\n\\n    /**\\n     * @dev Deprecated. This function has issues similar to the ones found in\\n     * {IERC20-approve}, and its usage is discouraged.\\n     *\\n     * Whenever possible, use {safeIncreaseAllowance} and\\n     * {safeDecreaseAllowance} instead.\\n     */\\n    function safeApprove(\\n        IERC20Upgradeable token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        // safeApprove should only be called when setting an initial allowance,\\n        // or when resetting it to zero. To increase and decrease it, use\\n        // 'safeIncreaseAllowance' and 'safeDecreaseAllowance'\\n        require(\\n            (value == 0) || (token.allowance(address(this), spender) == 0),\\n            \\\"SafeERC20: approve from non-zero to non-zero allowance\\\"\\n        );\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));\\n    }\\n\\n    function safeIncreaseAllowance(\\n        IERC20Upgradeable token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        uint256 newAllowance = token.allowance(address(this), spender) + value;\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n    }\\n\\n    function safeDecreaseAllowance(\\n        IERC20Upgradeable token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        unchecked {\\n            uint256 oldAllowance = token.allowance(address(this), spender);\\n            require(oldAllowance >= value, \\\"SafeERC20: decreased allowance below zero\\\");\\n            uint256 newAllowance = oldAllowance - value;\\n            _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20Upgradeable token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address.functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data, \\\"SafeERC20: low-level call failed\\\");\\n        if (returndata.length > 0) {\\n            // Return data is optional\\n            require(abi.decode(returndata, (bool)), \\\"SafeERC20: ERC20 operation did not succeed\\\");\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xc7d7fe7d5ed5068742927e37b400591153dbe8526cd942cfcf5dbb971ba5e8e2\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC721/IERC721ReceiverUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @title ERC721 token receiver interface\\n * @dev Interface for any contract that wants to support safeTransfers\\n * from ERC721 asset contracts.\\n */\\ninterface IERC721ReceiverUpgradeable {\\n    /**\\n     * @dev Whenever an {IERC721} `tokenId` token is transferred to this contract via {IERC721-safeTransferFrom}\\n     * by `operator` from `from`, this function is called.\\n     *\\n     * It must return its Solidity selector to confirm the token transfer.\\n     * If any other value is returned or the interface is not implemented by the recipient, the transfer will be reverted.\\n     *\\n     * The selector can be obtained in Solidity with `IERC721.onERC721Received.selector`.\\n     */\\n    function onERC721Received(\\n        address operator,\\n        address from,\\n        uint256 tokenId,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n}\\n\",\"keccak256\":\"0x3d03f5cb8b9f17b75c3b6eb4921b1fe7b87ed77cf0c8638496eee5183a5101e0\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC721/IERC721Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165Upgradeable.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721Upgradeable is IERC165Upgradeable {\\n    /**\\n     * @dev Emitted when `tokenId` token is transferred from `from` to `to`.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.\\n     */\\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.\\n     */\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Returns the number of tokens in ``owner``'s account.\\n     */\\n    function balanceOf(address owner) external view returns (uint256 balance);\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be have been allowed to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Transfers `tokenId` token from `from` to `to`.\\n     *\\n     * WARNING: Usage of this method is discouraged, use {safeTransferFrom} whenever possible.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Gives permission to `to` to transfer `tokenId` token to another account.\\n     * The approval is cleared when the token is transferred.\\n     *\\n     * Only a single account can be approved at a time, so approving the zero address clears previous approvals.\\n     *\\n     * Requirements:\\n     *\\n     * - The caller must own the token or be an approved operator.\\n     * - `tokenId` must exist.\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Returns the account approved for `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n    /**\\n     * @dev Approve or remove `operator` as an operator for the caller.\\n     * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.\\n     *\\n     * Requirements:\\n     *\\n     * - The `operator` cannot be the caller.\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function setApprovalForAll(address operator, bool _approved) external;\\n\\n    /**\\n     * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.\\n     *\\n     * See {setApprovalForAll}\\n     */\\n    function isApprovedForAll(address owner, address operator) external view returns (bool);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId,\\n        bytes calldata data\\n    ) external;\\n}\\n\",\"keccak256\":\"0xfbb3ca7272af58dc245a20e91a1f68481ee04706fa3fe46d184000efc21f4bad\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/AddressUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary AddressUpgradeable {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // This method relies on extcodesize, which returns 0 for contracts in\\n        // construction, since the code is only stored at the end of the\\n        // constructor execution.\\n\\n        uint256 size;\\n        assembly {\\n            size := extcodesize(account)\\n        }\\n        return size > 0;\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason, it is bubbled up by this\\n     * function (like regular Solidity function calls).\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCall(target, data, \\\"Address: low-level call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with\\n     * `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, value, \\\"Address: low-level call with value failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but\\n     * with `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(address(this).balance >= value, \\\"Address: insufficient balance for call\\\");\\n        require(isContract(target), \\\"Address: call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        return functionStaticCall(target, data, \\\"Address: low-level static call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        require(isContract(target), \\\"Address: static call to non-contract\\\");\\n\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResult(success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Tool to verifies that a low level call was successful, and revert if it wasn't, either by bubbling the\\n     * revert reason using the provided one.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function verifyCallResult(\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal pure returns (bytes memory) {\\n        if (success) {\\n            return returndata;\\n        } else {\\n            // Look for revert reason and bubble it up if present\\n            if (returndata.length > 0) {\\n                // The easiest way to bubble the revert reason is using memory via assembly\\n\\n                assembly {\\n                    let returndata_size := mload(returndata)\\n                    revert(add(32, returndata), returndata_size)\\n                }\\n            } else {\\n                revert(errorMessage);\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x946f08c0a132c5877d458d7af7956da60607f20a5c03dd75760708c848aae6b7\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/introspection/IERC165Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165Upgradeable {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x1c4860acd323e34a67b3e97faab9aaa55fe8e92b1dcf08b5f47f3468d58ce75c\",\"license\":\"MIT\"},\"contracts/cake/AccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\\\";\\nimport \\\"../interfaces/IAccessControl.sol\\\";\\n\\n/// @title Cake access control\\n/// @author landakram\\n/// @notice This contact centralizes contract-to-contract access control using a simple\\n/// access-control list. There are two types of actors: operators and admins. Operators\\n/// are callers involved in a regular end-user tx. This would likely be another Goldfinch\\n/// contract for which the current contract is a dependency. Admins are callers allowed\\n/// for specific admin actions (like changing parameters, topping up funds, etc.).\\ncontract AccessControl is Initializable, IAccessControl {\\n  /// @dev Mapping from contract address to contract admin;\\n  mapping(address => address) public admins;\\n\\n  function initialize(address admin) public initializer {\\n    admins[address(this)] = admin;\\n    emit AdminSet(address(this), admin);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function setAdmin(address resource, address admin) external {\\n    requireSuperAdmin(msg.sender);\\n    admins[resource] = admin;\\n    emit AdminSet(resource, admin);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function requireAdmin(address resource, address accessor) public view {\\n    if (accessor == address(0)) revert ZeroAddress();\\n    bool isAdmin = admins[resource] == accessor;\\n    if (!isAdmin) revert RequiresAdmin(resource, accessor);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function requireSuperAdmin(address accessor) public view {\\n    // The super admin is the admin of this AccessControl contract\\n    requireAdmin({resource: address(this), accessor: accessor});\\n  }\\n}\\n\",\"keccak256\":\"0x1b70acad9e92a3b0898a989d413bb16b5c5707faf84f2eb31354b453385a7b54\",\"license\":\"MIT\"},\"contracts/cake/Base.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport {Context} from \\\"./Context.sol\\\";\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\nusing Routing.Context for Context;\\n\\n/// @title Base contract for application-layer\\n/// @author landakram\\n/// @notice This base contract is what all application-layer contracts should inherit from.\\n///  It provides `Context`, as well as some convenience functions for working with it and\\n///  using access control. All public methods on the inheriting contract should likely\\n///  use one of the modifiers to assert valid callers.\\nabstract contract Base {\\n  error RequiresOperator(address resource, address accessor);\\n  error ZeroAddress();\\n\\n  /// @dev this is safe for proxies as immutable causes the context to be written to\\n  ///  bytecode on deployment. The proxy then treats this as a constant.\\n  Context immutable context;\\n\\n  constructor(Context _context) {\\n    context = _context;\\n  }\\n\\n  modifier onlyOperator(bytes4 operatorId) {\\n    requireOperator(operatorId, msg.sender);\\n    _;\\n  }\\n\\n  modifier onlyOperators(bytes4[2] memory operatorIds) {\\n    requireAnyOperator(operatorIds, msg.sender);\\n    _;\\n  }\\n\\n  modifier onlyAdmin() {\\n    context.accessControl().requireAdmin(address(this), msg.sender);\\n    _;\\n  }\\n\\n  function requireAnyOperator(bytes4[2] memory operatorIds, address accessor) private view {\\n    if (accessor == address(0)) revert ZeroAddress();\\n\\n    bool validOperator = isOperator(operatorIds[0], accessor) ||\\n      isOperator(operatorIds[1], accessor);\\n\\n    if (!validOperator) revert RequiresOperator(address(this), accessor);\\n  }\\n\\n  function requireOperator(bytes4 operatorId, address accessor) private view {\\n    if (accessor == address(0)) revert ZeroAddress();\\n    if (!isOperator(operatorId, accessor)) revert RequiresOperator(address(this), accessor);\\n  }\\n\\n  function isOperator(bytes4 operatorId, address accessor) private view returns (bool) {\\n    return context.router().contracts(operatorId) == accessor;\\n  }\\n}\\n\",\"keccak256\":\"0x6615f2ab581dbc3ce138a6b33315de058facc951db8f210c1475cca5b96ac176\",\"license\":\"MIT\"},\"contracts/cake/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport {AccessControl} from \\\"./AccessControl.sol\\\";\\nimport {Router} from \\\"./Router.sol\\\";\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\nusing Routing.Context for Context;\\n\\n/// @title Entry-point for all application-layer contracts.\\n/// @author landakram\\n/// @notice This contract provides an interface for retrieving other contract addresses and doing access\\n///  control.\\ncontract Context {\\n  /// @notice Used for retrieving other contract addresses.\\n  /// @dev This variable is immutable. This is done to save gas, as it is expected to be referenced\\n  /// in every end-user call with a call-chain length > 0. Note that it is written into the contract\\n  /// bytecode at contract creation time, so if the contract is deployed as the implementation for proxies,\\n  /// every proxy will share the same Router address.\\n  Router public immutable router;\\n\\n  constructor(Router _router) {\\n    router = _router;\\n  }\\n}\\n\",\"keccak256\":\"0xa680415dd02e61f8cd730f3198096d73b40fddb2f7f46136fc20e02a173ec107\",\"license\":\"MIT\"},\"contracts/cake/Router.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\\\";\\nimport {AccessControl} from \\\"./AccessControl.sol\\\";\\nimport {IRouter} from \\\"../interfaces/IRouter.sol\\\";\\n\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\n/// @title Router\\n/// @author landakram\\n/// @notice This contract provides service discovery for contracts using the cake framework.\\n///   It can be used in conjunction with the convenience methods defined in the `Routing.Context`\\n///   and `Routing.Keys` libraries.\\ncontract Router is Initializable, IRouter {\\n  /// @notice Mapping of keys to contract addresses. Keys are the first 4 bytes of the keccak of\\n  ///   the contract's name. See Routing.sol for all options.\\n  mapping(bytes4 => address) public contracts;\\n\\n  function initialize(AccessControl accessControl) public initializer {\\n    contracts[Routing.Keys.AccessControl] = address(accessControl);\\n  }\\n\\n  /// @notice Associate a routing key to a contract address\\n  /// @dev This function is only callable by the Router admin\\n  /// @param key A routing key (defined in the `Routing.Keys` libary)\\n  /// @param addr A contract address\\n  function setContract(bytes4 key, address addr) public {\\n    AccessControl accessControl = AccessControl(contracts[Routing.Keys.AccessControl]);\\n    accessControl.requireAdmin(address(this), msg.sender);\\n    contracts[key] = addr;\\n    emit SetContract(key, addr);\\n  }\\n}\\n\",\"keccak256\":\"0x686176336adffd914b35e6cc23b551c4af63c43eba9c5416749427a5e02a98b0\",\"license\":\"MIT\"},\"contracts/cake/Routing.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// solhint-disable const-name-snakecase\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\n\\nimport {IMembershipVault} from \\\"../interfaces/IMembershipVault.sol\\\";\\nimport {IGFILedger} from \\\"../interfaces/IGFILedger.sol\\\";\\nimport {ICapitalLedger} from \\\"../interfaces/ICapitalLedger.sol\\\";\\nimport {IMembershipDirector} from \\\"../interfaces/IMembershipDirector.sol\\\";\\nimport {IMembershipOrchestrator} from \\\"../interfaces/IMembershipOrchestrator.sol\\\";\\nimport {IMembershipLedger} from \\\"../interfaces/IMembershipLedger.sol\\\";\\nimport {IMembershipCollector} from \\\"../interfaces/IMembershipCollector.sol\\\";\\nimport {IBackerRewards} from \\\"../interfaces/IBackerRewards.sol\\\";\\n\\nimport {ISeniorPool} from \\\"../interfaces/ISeniorPool.sol\\\";\\nimport {IPoolTokens} from \\\"../interfaces/IPoolTokens.sol\\\";\\nimport {IStakingRewards} from \\\"../interfaces/IStakingRewards.sol\\\";\\nimport {IGo} from \\\"../interfaces/IGo.sol\\\";\\n\\nimport {IERC20Splitter} from \\\"../interfaces/IERC20Splitter.sol\\\";\\nimport {Context as ContextContract} from \\\"./Context.sol\\\";\\nimport {IAccessControl} from \\\"../interfaces/IAccessControl.sol\\\";\\n\\n/// @title Routing.Keys\\n/// @notice This library is used to define routing keys used by `Router`.\\n/// @dev We use uints instead of enums for several reasons. First, keys can be re-ordered\\n///   or removed. This is useful when routing keys are deprecated; they can be moved to a\\n///   different section of the file. Second, other libraries or contracts can define their\\n///   own routing keys independent of this global mapping. This is useful for test contracts.\\nlibrary Keys {\\n  // Membership\\n  bytes4 internal constant MembershipOrchestrator = bytes4(keccak256(\\\"MembershipOrchestrator\\\"));\\n  bytes4 internal constant MembershipDirector = bytes4(keccak256(\\\"MembershipDirector\\\"));\\n  bytes4 internal constant GFILedger = bytes4(keccak256(\\\"GFILedger\\\"));\\n  bytes4 internal constant CapitalLedger = bytes4(keccak256(\\\"CapitalLedger\\\"));\\n  bytes4 internal constant MembershipCollector = bytes4(keccak256(\\\"MembershipCollector\\\"));\\n  bytes4 internal constant MembershipLedger = bytes4(keccak256(\\\"MembershipLedger\\\"));\\n  bytes4 internal constant MembershipVault = bytes4(keccak256(\\\"MembershipVault\\\"));\\n\\n  // Tokens\\n  bytes4 internal constant GFI = bytes4(keccak256(\\\"GFI\\\"));\\n  bytes4 internal constant FIDU = bytes4(keccak256(\\\"FIDU\\\"));\\n  bytes4 internal constant USDC = bytes4(keccak256(\\\"USDC\\\"));\\n\\n  // Cake\\n  bytes4 internal constant AccessControl = bytes4(keccak256(\\\"AccessControl\\\"));\\n  bytes4 internal constant Router = bytes4(keccak256(\\\"Router\\\"));\\n\\n  // Core\\n  bytes4 internal constant ReserveSplitter = bytes4(keccak256(\\\"ReserveSplitter\\\"));\\n  bytes4 internal constant PoolTokens = bytes4(keccak256(\\\"PoolTokens\\\"));\\n  bytes4 internal constant SeniorPool = bytes4(keccak256(\\\"SeniorPool\\\"));\\n  bytes4 internal constant StakingRewards = bytes4(keccak256(\\\"StakingRewards\\\"));\\n  bytes4 internal constant ProtocolAdmin = bytes4(keccak256(\\\"ProtocolAdmin\\\"));\\n  bytes4 internal constant PauserAdmin = bytes4(keccak256(\\\"PauserAdmin\\\"));\\n  bytes4 internal constant BackerRewards = bytes4(keccak256(\\\"BackerRewards\\\"));\\n  bytes4 internal constant Go = bytes4(keccak256(\\\"Go\\\"));\\n}\\n\\n/// @title Routing.Context\\n/// @notice This library provides convenience functions for getting contracts from `Router`.\\nlibrary Context {\\n  function accessControl(ContextContract context) internal view returns (IAccessControl) {\\n    return IAccessControl(context.router().contracts(Keys.AccessControl));\\n  }\\n\\n  function membershipVault(ContextContract context) internal view returns (IMembershipVault) {\\n    return IMembershipVault(context.router().contracts(Keys.MembershipVault));\\n  }\\n\\n  function capitalLedger(ContextContract context) internal view returns (ICapitalLedger) {\\n    return ICapitalLedger(context.router().contracts(Keys.CapitalLedger));\\n  }\\n\\n  function gfiLedger(ContextContract context) internal view returns (IGFILedger) {\\n    return IGFILedger(context.router().contracts(Keys.GFILedger));\\n  }\\n\\n  function gfi(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.GFI));\\n  }\\n\\n  function membershipDirector(ContextContract context) internal view returns (IMembershipDirector) {\\n    return IMembershipDirector(context.router().contracts(Keys.MembershipDirector));\\n  }\\n\\n  function membershipOrchestrator(\\n    ContextContract context\\n  ) internal view returns (IMembershipOrchestrator) {\\n    return IMembershipOrchestrator(context.router().contracts(Keys.MembershipOrchestrator));\\n  }\\n\\n  function stakingRewards(ContextContract context) internal view returns (IStakingRewards) {\\n    return IStakingRewards(context.router().contracts(Keys.StakingRewards));\\n  }\\n\\n  function poolTokens(ContextContract context) internal view returns (IPoolTokens) {\\n    return IPoolTokens(context.router().contracts(Keys.PoolTokens));\\n  }\\n\\n  function seniorPool(ContextContract context) internal view returns (ISeniorPool) {\\n    return ISeniorPool(context.router().contracts(Keys.SeniorPool));\\n  }\\n\\n  function fidu(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.FIDU));\\n  }\\n\\n  function usdc(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.USDC));\\n  }\\n\\n  function reserveSplitter(ContextContract context) internal view returns (IERC20Splitter) {\\n    return IERC20Splitter(context.router().contracts(Keys.ReserveSplitter));\\n  }\\n\\n  function membershipLedger(ContextContract context) internal view returns (IMembershipLedger) {\\n    return IMembershipLedger(context.router().contracts(Keys.MembershipLedger));\\n  }\\n\\n  function membershipCollector(\\n    ContextContract context\\n  ) internal view returns (IMembershipCollector) {\\n    return IMembershipCollector(context.router().contracts(Keys.MembershipCollector));\\n  }\\n\\n  function protocolAdmin(ContextContract context) internal view returns (address) {\\n    return context.router().contracts(Keys.ProtocolAdmin);\\n  }\\n\\n  function pauserAdmin(ContextContract context) internal view returns (address) {\\n    return context.router().contracts(Keys.PauserAdmin);\\n  }\\n\\n  function backerRewards(ContextContract context) internal view returns (IBackerRewards) {\\n    return IBackerRewards(context.router().contracts(Keys.BackerRewards));\\n  }\\n\\n  function go(ContextContract context) internal view returns (IGo) {\\n    return IGo(context.router().contracts(Keys.Go));\\n  }\\n}\\n\",\"keccak256\":\"0x99ee28a51ea5575ac0b1750a477822f5ab70d5cd68812b21c0a81b3142994069\",\"license\":\"MIT\"},\"contracts/interfaces/IAccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\n/// @title Cake access control\\n/// @author landakram\\n/// @notice This contact centralizes contract-to-contract access control using a simple\\n/// access-control list. There are two types of actors: operators and admins. Operators\\n/// are callers involved in a regular end-user tx. This would likely be another Goldfinch\\n/// contract for which the current contract is a dependency. Admins are callers allowed\\n/// for specific admin actions (like changing parameters, topping up funds, etc.).\\ninterface IAccessControl {\\n  error RequiresAdmin(address resource, address accessor);\\n  error ZeroAddress();\\n\\n  event AdminSet(address indexed resource, address indexed admin);\\n\\n  /// @notice Set an admin for a given resource\\n  /// @param resource An address which with `admin` should be allowed to administer\\n  /// @param admin An address which should be allowed to administer `resource`\\n  /// @dev This method is only callable by the super-admin (the admin of this AccessControl\\n  ///   contract)\\n  function setAdmin(address resource, address admin) external;\\n\\n  /// @notice Require a valid admin for a given resource\\n  /// @param resource An address that `accessor` is attempting to access\\n  /// @param accessor An address on which to assert access control checks\\n  /// @dev This method reverts when `accessor` is not a valid admin\\n  function requireAdmin(address resource, address accessor) external view;\\n\\n  /// @notice Require a super-admin. A super-admin is an admin of this AccessControl contract.\\n  /// @param accessor An address on which to assert access control checks\\n  /// @dev This method reverts when `accessor` is not a valid super-admin\\n  function requireSuperAdmin(address accessor) external view;\\n}\\n\",\"keccak256\":\"0xa77d24e074f86c95657ada01678e9c7136b8769856182428f0f2cb6d191b341f\",\"license\":\"MIT\"},\"contracts/interfaces/IBackerRewards.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity >=0.6.12;\\n\\npragma experimental ABIEncoderV2;\\n\\nimport {ITranchedPool} from \\\"./ITranchedPool.sol\\\";\\n\\ninterface IBackerRewards {\\n  struct BackerRewardsTokenInfo {\\n    uint256 rewardsClaimed; // gfi claimed\\n    uint256 accRewardsPerPrincipalDollarAtMint; // Pool's accRewardsPerPrincipalDollar at PoolToken mint()\\n  }\\n\\n  struct BackerRewardsInfo {\\n    uint256 accRewardsPerPrincipalDollar; // accumulator gfi per interest dollar\\n  }\\n\\n  /// @notice Staking rewards parameters relevant to a TranchedPool\\n  struct StakingRewardsPoolInfo {\\n    // @notice the value `StakingRewards.accumulatedRewardsPerToken()` at the last checkpoint\\n    uint256 accumulatedRewardsPerTokenAtLastCheckpoint;\\n    // @notice last time the rewards info was updated\\n    //\\n    // we need this in order to know how much to pro rate rewards after the term is over.\\n    uint256 lastUpdateTime;\\n    // @notice staking rewards parameters for each slice of the tranched pool\\n    StakingRewardsSliceInfo[] slicesInfo;\\n  }\\n\\n  /// @notice Staking rewards paramters relevant to a TranchedPool slice\\n  struct StakingRewardsSliceInfo {\\n    // @notice fidu share price when the slice is first drawn down\\n    //\\n    // we need to save this to calculate what an equivalent position in\\n    // the senior pool would be at the time the slice is downdown\\n    uint256 fiduSharePriceAtDrawdown;\\n    // @notice the amount of principal deployed at the last checkpoint\\n    //\\n    // we use this to calculate the amount of principal that should\\n    // acctually accrue rewards during between the last checkpoint and\\n    // and subsequent updates\\n    uint256 principalDeployedAtLastCheckpoint;\\n    // @notice the value of StakingRewards.accumulatedRewardsPerToken() at time of drawdown\\n    //\\n    // we need to keep track of this to use this as a base value to accumulate rewards\\n    // for tokens. If the token has never claimed staking rewards, we use this value\\n    // and the current staking rewards accumulator\\n    uint256 accumulatedRewardsPerTokenAtDrawdown;\\n    // @notice amount of rewards per token accumulated over the lifetime of the slice that a backer\\n    //          can claim\\n    uint256 accumulatedRewardsPerTokenAtLastCheckpoint;\\n    // @notice the amount of rewards per token accumulated over the lifetime of the slice\\n    //\\n    // this value is \\\"unrealized\\\" because backers will be unable to claim against this value.\\n    // we keep this value so that we can always accumulate rewards for the amount of capital\\n    // deployed at any point in time, but not allow backers to withdraw them until a payment\\n    // is made. For example: we want to accumulate rewards when a backer does a drawdown. but\\n    // a backer shouldn't be allowed to claim rewards until a payment is made.\\n    //\\n    // this value is scaled depending on the current proportion of capital currently deployed\\n    // in the slice. For example, if the staking rewards contract accrued 10 rewards per token\\n    // between the current checkpoint and a new update, and only 20% of the capital was deployed\\n    // during that period, we would accumulate 2 (10 * 20%) rewards.\\n    uint256 unrealizedAccumulatedRewardsPerTokenAtLastCheckpoint;\\n  }\\n\\n  /// @notice Staking rewards parameters relevant to a PoolToken\\n  struct StakingRewardsTokenInfo {\\n    // @notice the amount of rewards accumulated the last time a token's rewards were withdrawn\\n    uint256 accumulatedRewardsPerTokenAtLastWithdraw;\\n  }\\n\\n  /// @notice total amount of GFI rewards available, times 1e18\\n  function totalRewards() external view returns (uint256);\\n\\n  /// @notice interest $ eligible for gfi rewards, times 1e18\\n  function maxInterestDollarsEligible() external view returns (uint256);\\n\\n  /// @notice counter of total interest repayments, times 1e6\\n  function totalInterestReceived() external view returns (uint256);\\n\\n  /// @notice totalRewards/totalGFISupply * 100, times 1e18\\n  function totalRewardPercentOfTotalGFI() external view returns (uint256);\\n\\n  /// @notice Get backer rewards metadata for a pool token\\n  function getTokenInfo(uint256 poolTokenId) external view returns (BackerRewardsTokenInfo memory);\\n\\n  /// @notice Get backer staking rewards metadata for a pool token\\n  function getStakingRewardsTokenInfo(\\n    uint256 poolTokenId\\n  ) external view returns (StakingRewardsTokenInfo memory);\\n\\n  /// @notice Get backer staking rewards for a pool\\n  function getBackerStakingRewardsPoolInfo(\\n    ITranchedPool pool\\n  ) external view returns (StakingRewardsPoolInfo memory);\\n\\n  /// @notice Calculates the accRewardsPerPrincipalDollar for a given pool,\\n  ///   when a interest payment is received by the protocol\\n  /// @param _interestPaymentAmount Atomic usdc amount of the interest payment\\n  function allocateRewards(uint256 _interestPaymentAmount) external;\\n\\n  /// @notice callback for TranchedPools when they drawdown\\n  /// @param sliceIndex index of the tranched pool slice\\n  /// @dev initializes rewards info for the calling TranchedPool if it's the first\\n  ///  drawdown for the given slice\\n  function onTranchedPoolDrawdown(uint256 sliceIndex) external;\\n\\n  /// @notice When a pool token is minted for multiple drawdowns,\\n  ///   set accRewardsPerPrincipalDollarAtMint to the current accRewardsPerPrincipalDollar price\\n  /// @param poolAddress Address of the pool associated with the pool token\\n  /// @param tokenId Pool token id\\n  function setPoolTokenAccRewardsPerPrincipalDollarAtMint(\\n    address poolAddress,\\n    uint256 tokenId\\n  ) external;\\n\\n  /// @notice PoolToken request to withdraw all allocated rewards\\n  /// @param tokenId Pool token id\\n  /// @return amount of rewards withdrawn\\n  function withdraw(uint256 tokenId) external returns (uint256);\\n\\n  /**\\n   * @notice Set BackerRewards and BackerStakingRewards metadata for tokens created by a pool token split.\\n   * @param originalBackerRewardsTokenInfo backer rewards info for the pool token that was split\\n   * @param originalStakingRewardsTokenInfo backer staking rewards info for the pool token that was split\\n   * @param newTokenId id of one of the tokens in the split\\n   * @param newRewardsClaimed rewardsClaimed value for the new token.\\n   */\\n  function setBackerAndStakingRewardsTokenInfoOnSplit(\\n    BackerRewardsTokenInfo memory originalBackerRewardsTokenInfo,\\n    StakingRewardsTokenInfo memory originalStakingRewardsTokenInfo,\\n    uint256 newTokenId,\\n    uint256 newRewardsClaimed\\n  ) external;\\n\\n  /**\\n   * @notice Calculate the gross available gfi rewards for a PoolToken\\n   * @param tokenId Pool token id\\n   * @return The amount of GFI claimable\\n   */\\n  function poolTokenClaimableRewards(uint256 tokenId) external view returns (uint256);\\n\\n  /// @notice Clear all BackerRewards and StakingRewards associated data for `tokenId`\\n  function clearTokenInfo(uint256 tokenId) external;\\n}\\n\",\"keccak256\":\"0x3dd4a2d1cc08623440bca57bb606671fe002edf56be04d5a9138ef01fcffeda7\",\"license\":\"MIT\"},\"contracts/interfaces/ICapitalLedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\nenum CapitalAssetType {\\n  INVALID,\\n  ERC721\\n}\\n\\ninterface ICapitalLedger {\\n  /**\\n   * @notice Emitted when a new capital erc721 deposit has been made\\n   * @param owner address owning the deposit\\n   * @param assetAddress address of the deposited ERC721\\n   * @param positionId id for the deposit\\n   * @param assetTokenId id of the token from the ERC721 `assetAddress`\\n   * @param usdcEquivalent usdc equivalent value at the time of deposit\\n   */\\n  event CapitalERC721Deposit(\\n    address indexed owner,\\n    address indexed assetAddress,\\n    uint256 positionId,\\n    uint256 assetTokenId,\\n    uint256 usdcEquivalent\\n  );\\n\\n  /**\\n   * @notice Emitted when a new ERC721 capital withdrawal has been made\\n   * @param owner address owning the deposit\\n   * @param positionId id for the capital position\\n   * @param assetAddress address of the underlying ERC721\\n   * @param depositTimestamp block.timestamp of the original deposit\\n   */\\n  event CapitalERC721Withdrawal(\\n    address indexed owner,\\n    uint256 positionId,\\n    address assetAddress,\\n    uint256 depositTimestamp\\n  );\\n\\n  /**\\n   * @notice Emitted when an ERC721 capital asset has been harvested\\n   * @param positionId id for the capital position\\n   * @param assetAddress address of the underlying ERC721\\n   */\\n  event CapitalERC721Harvest(uint256 indexed positionId, address assetAddress);\\n\\n  /**\\n   * @notice Emitted when an ERC721 capital asset has been \\\"kicked\\\", which may cause the underlying\\n   *  usdc equivalent value to change.\\n   * @param positionId id for the capital position\\n   * @param assetAddress address of the underlying ERC721\\n   * @param usdcEquivalent new usdc equivalent value of the position\\n   */\\n  event CapitalPositionAdjustment(\\n    uint256 indexed positionId,\\n    address assetAddress,\\n    uint256 usdcEquivalent\\n  );\\n\\n  /// Thrown when called with an invalid asset type for the function. Valid\\n  /// types are defined under CapitalAssetType\\n  error InvalidAssetType(CapitalAssetType);\\n\\n  /**\\n   * @notice Account for a deposit of `id` for the ERC721 asset at `assetAddress`.\\n   * @dev reverts with InvalidAssetType if `assetAddress` is not an ERC721\\n   * @param owner address that owns the position\\n   * @param assetAddress address of the ERC20 address\\n   * @param assetTokenId id of the ERC721 asset to add\\n   * @return id of the newly created position\\n   */\\n  function depositERC721(\\n    address owner,\\n    address assetAddress,\\n    uint256 assetTokenId\\n  ) external returns (uint256);\\n\\n  /**\\n   * @notice Get the id of the ERC721 asset held by position `id`. Pair this with\\n   *  `assetAddressOf` to get the address & id of the nft.\\n   * @dev reverts with InvalidAssetType if `assetAddress` is not an ERC721\\n   * @param positionId id of the position\\n   * @return id of the underlying ERC721 asset\\n   */\\n  function erc721IdOf(uint256 positionId) external view returns (uint256);\\n\\n  /**\\n   * @notice Completely withdraw a position\\n   * @param positionId id of the position\\n   */\\n  function withdraw(uint256 positionId) external;\\n\\n  /**\\n   * @notice Harvests the associated rewards, interest, and other accrued assets\\n   *  associated with the asset token. For example, if given a PoolToken asset,\\n   *  this will collect the GFI rewards (if available), redeemable interest, and\\n   *  redeemable principal, and send that to the `owner`.\\n   * @param positionId id of the position\\n   */\\n  function harvest(uint256 positionId) external;\\n\\n  /**\\n   * @notice Get the asset address of the position. Example: For an ERC721 position, this\\n   *  returns the address of that ERC721 contract.\\n   * @param positionId id of the position\\n   * @return asset address of the position\\n   */\\n  function assetAddressOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Get the owner of a given position.\\n   * @param positionId id of the position\\n   * @return owner of the position\\n   */\\n  function ownerOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Total number of positions in the ledger\\n   * @return number of positions in the ledger\\n   */\\n  function totalSupply() external view returns (uint256);\\n\\n  /**\\n   * @notice Get the number of capital positions held by an address\\n   * @param addr address\\n   * @return positions held by address\\n   */\\n  function balanceOf(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Returns a position ID owned by `owner` at a given `index` of its position list\\n   * @param owner owner of the positions\\n   * @param index index of the owner's balance to get the position ID of\\n   * @return position id\\n   *\\n   * @dev use with {balanceOf} to enumerate all of `owner`'s positions\\n   */\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @dev Returns a position ID at a given `index` of all the positions stored by the contract.\\n   * @param index index to get the position ID at\\n   * @return position id\\n   *\\n   * @dev use with {totalSupply} to enumerate all positions\\n   */\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the USDC value of `owner`s positions, reporting what is currently\\n   *  eligible and the total amount.\\n   * @param owner address owning the positions\\n   * @return eligibleAmount USDC value of positions eligible for rewards\\n   * @return totalAmount total USDC value of positions\\n   *\\n   * @dev this is used by Membership to determine how much is eligible in\\n   *  the current epoch vs the next epoch.\\n   */\\n  function totalsOf(\\n    address owner\\n  ) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n}\\n\",\"keccak256\":\"0xeec7d90ae7764cb0fdc6f0fa280bbc85b1c4be15fb6bb2ca20b6c223c90dc13d\",\"license\":\"MIT\"},\"contracts/interfaces/ICreditLine.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\ninterface ICreditLine {\\n  function borrower() external view returns (address);\\n\\n  function limit() external view returns (uint256);\\n\\n  function maxLimit() external view returns (uint256);\\n\\n  function interestApr() external view returns (uint256);\\n\\n  function paymentPeriodInDays() external view returns (uint256);\\n\\n  function principalGracePeriodInDays() external view returns (uint256);\\n\\n  function termInDays() external view returns (uint256);\\n\\n  function lateFeeApr() external view returns (uint256);\\n\\n  function isLate() external view returns (bool);\\n\\n  function withinPrincipalGracePeriod() external view returns (bool);\\n\\n  // Accounting variables\\n  function balance() external view returns (uint256);\\n\\n  function interestOwed() external view returns (uint256);\\n\\n  function principalOwed() external view returns (uint256);\\n\\n  function termEndTime() external view returns (uint256);\\n\\n  function nextDueTime() external view returns (uint256);\\n\\n  function interestAccruedAsOf() external view returns (uint256);\\n\\n  function lastFullPaymentTime() external view returns (uint256);\\n}\\n\",\"keccak256\":\"0xd54b264344ce302597ee4f04f147000275d05c8fc9612cc21eaff915ff1f30c8\",\"license\":\"MIT\"},\"contracts/interfaces/IERC20Splitter.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\ninterface IERC20Splitter {\\n  function lastDistributionAt() external view returns (uint256);\\n\\n  function distribute() external;\\n\\n  function replacePayees(address[] calldata _payees, uint256[] calldata _shares) external;\\n\\n  function pendingDistributionFor(address payee) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x915a4058d1c4f6e694e1fdbaa708d3ec7e26dba3162f83290d997ec484960972\",\"license\":\"MIT\"},\"contracts/interfaces/IGFILedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\ninterface IGFILedger {\\n  struct Position {\\n    // Owner of the position\\n    address owner;\\n    // Index of the position in the ownership array\\n    uint256 ownedIndex;\\n    // Amount of GFI held in the position\\n    uint256 amount;\\n    // When the position was deposited\\n    uint256 depositTimestamp;\\n  }\\n\\n  /**\\n   * @notice Emitted when a new GFI deposit has been made\\n   * @param owner address owning the deposit\\n   * @param positionId id for the deposit\\n   * @param amount how much GFI was deposited\\n   */\\n  event GFIDeposit(address indexed owner, uint256 indexed positionId, uint256 amount);\\n\\n  /**\\n   * @notice Emitted when a new GFI withdrawal has been made. If the remaining amount is 0, the position has bee removed\\n   * @param owner address owning the withdrawn position\\n   * @param positionId id for the position\\n   * @param remainingAmount how much GFI is remaining in the position\\n   * @param depositTimestamp block.timestamp of the original deposit\\n   */\\n  event GFIWithdrawal(\\n    address indexed owner,\\n    uint256 indexed positionId,\\n    uint256 withdrawnAmount,\\n    uint256 remainingAmount,\\n    uint256 depositTimestamp\\n  );\\n\\n  /**\\n   * @notice Account for a new deposit by the owner.\\n   * @param owner address to account for the deposit\\n   * @param amount how much was deposited\\n   * @return how much was deposited\\n   */\\n  function deposit(address owner, uint256 amount) external returns (uint256);\\n\\n  /**\\n   * @notice Account for a new withdraw by the owner.\\n   * @param positionId id of the position\\n   * @return how much was withdrawn\\n   */\\n  function withdraw(uint256 positionId) external returns (uint256);\\n\\n  /**\\n   * @notice Account for a new withdraw by the owner.\\n   * @param positionId id of the position\\n   * @param amount how much to withdraw\\n   * @return how much was withdrawn\\n   */\\n  function withdraw(uint256 positionId, uint256 amount) external returns (uint256);\\n\\n  /**\\n   * @notice Get the number of GFI positions held by an address\\n   * @param addr address\\n   * @return positions held by address\\n   */\\n  function balanceOf(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the owner of a given position.\\n   * @param positionId id of the position\\n   * @return owner of the position\\n   */\\n  function ownerOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Total number of positions in the ledger\\n   * @return number of positions in the ledger\\n   */\\n  function totalSupply() external view returns (uint256);\\n\\n  /**\\n   * @notice Returns a position ID owned by `owner` at a given `index` of its position list\\n   * @param owner owner of the positions\\n   * @param index index of the owner's balance to get the position ID of\\n   * @return position id\\n   *\\n   * @dev use with {balanceOf} to enumerate all of `owner`'s positions\\n   */\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @dev Returns a position ID at a given `index` of all the positions stored by the contract.\\n   * @param index index to get the position ID at\\n   * @return token id\\n   *\\n   * @dev use with {totalSupply} to enumerate all positions\\n   */\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @notice Get amount of GFI of `owner`s positions, reporting what is currently\\n   *  eligible and the total amount.\\n   * @return eligibleAmount GFI amount of positions eligible for rewards\\n   * @return totalAmount total GFI amount of positions\\n   *\\n   * @dev this is used by Membership to determine how much is eligible in\\n   *  the current epoch vs the next epoch.\\n   */\\n  function totalsOf(\\n    address owner\\n  ) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n}\\n\",\"keccak256\":\"0x2d233d4c85262fe8d64bc7a22df6ce9bc5603bf879514df801b9d28e0e9fe114\",\"license\":\"MIT\"},\"contracts/interfaces/IGo.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nabstract contract IGo {\\n  uint256 public constant ID_TYPE_0 = 0;\\n  uint256 public constant ID_TYPE_1 = 1;\\n  uint256 public constant ID_TYPE_2 = 2;\\n  uint256 public constant ID_TYPE_3 = 3;\\n  uint256 public constant ID_TYPE_4 = 4;\\n  uint256 public constant ID_TYPE_5 = 5;\\n  uint256 public constant ID_TYPE_6 = 6;\\n  uint256 public constant ID_TYPE_7 = 7;\\n  uint256 public constant ID_TYPE_8 = 8;\\n  uint256 public constant ID_TYPE_9 = 9;\\n  uint256 public constant ID_TYPE_10 = 10;\\n\\n  /// @notice Returns the address of the UniqueIdentity contract.\\n  function uniqueIdentity() external virtual returns (address);\\n\\n  function go(address account) public view virtual returns (bool);\\n\\n  function goOnlyIdTypes(\\n    address account,\\n    uint256[] calldata onlyIdTypes\\n  ) public view virtual returns (bool);\\n\\n  /**\\n   * @notice Returns whether the provided account is go-listed for use of the SeniorPool on the Goldfinch protocol.\\n   * @param account The account whose go status to obtain\\n   * @return true if `account` is go listed\\n   */\\n  function goSeniorPool(address account) public view virtual returns (bool);\\n}\\n\",\"keccak256\":\"0x3d4e566ab6aa670da6526d3eaf090c7c4c4e1fae9e941c3dcba606f417051339\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipCollector.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\ninterface IMembershipCollector {\\n  /// @notice Have the collector distribute `amount` of Fidu to `addr`\\n  /// @param addr address to distribute to\\n  /// @param amount amount to distribute\\n  function distributeFiduTo(address addr, uint256 amount) external;\\n\\n  /// @notice Get the last epoch finalized by the collector. This means the\\n  ///  collector will no longer add rewards to the epoch.\\n  /// @return the last finalized epoch\\n  function lastFinalizedEpoch() external view returns (uint256);\\n\\n  /// @notice Get the rewards associated with `epoch`. This amount may change\\n  ///  until `epoch` has been finalized (is less than or equal to getLastFinalizedEpoch)\\n  /// @return rewards associated with `epoch`\\n  function rewardsForEpoch(uint256 epoch) external view returns (uint256);\\n\\n  /// @notice Estimate rewards for a given epoch. For epochs at or before lastFinalizedEpoch\\n  ///  this will be the fixed, accurate reward for the epoch. For the current and other\\n  ///  non-finalized epochs, this will be the value as if the epoch were finalized in that\\n  ///  moment.\\n  /// @param epoch epoch to estimate the rewards of\\n  /// @return rewards associated with `epoch`\\n  function estimateRewardsFor(uint256 epoch) external view returns (uint256);\\n\\n  /// @notice Finalize all unfinalized epochs. Causes the reserve splitter to distribute\\n  ///  if there are unfinalized epochs so all possible rewards are distributed.\\n  function finalizeEpochs() external;\\n}\\n\",\"keccak256\":\"0x8ea890c7237ee09c340afa47bce4fe6fd2e6d65bce601620edb1513e4b0f3914\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipDirector.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\ninterface IMembershipDirector {\\n  /**\\n   * @notice Adjust an `owner`s membership score and position due to the change\\n   *  in their GFI and Capital holdings\\n   * @param owner address who's holdings changed\\n   * @return id of membership position\\n   */\\n  function consumeHoldingsAdjustment(address owner) external returns (uint256);\\n\\n  /**\\n   * @notice Collect all membership yield enhancements for the owner.\\n   * @param owner address to claim rewards for\\n   * @return amount of yield enhancements collected\\n   */\\n  function collectRewards(address owner) external returns (uint256);\\n\\n  /**\\n   * @notice Check how many rewards are claimable for the owner. The return\\n   *  value here is how much would be retrieved by calling `collectRewards`.\\n   * @param owner address to calculate claimable rewards for\\n   * @return the amount of rewards that could be claimed by the owner\\n   */\\n  function claimableRewards(address owner) external view returns (uint256);\\n\\n  /**\\n   * @notice Calculate the membership score\\n   * @param gfi Amount of gfi\\n   * @param capital Amount of capital in USDC\\n   * @return membership score\\n   */\\n  function calculateMembershipScore(uint256 gfi, uint256 capital) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the current score of `owner`\\n   * @param owner address to check the score of\\n   * @return eligibleScore score that is currently eligible for rewards\\n   * @return totalScore score that will be elgible for rewards next epoch\\n   */\\n  function currentScore(\\n    address owner\\n  ) external view returns (uint256 eligibleScore, uint256 totalScore);\\n\\n  /**\\n   * @notice Get the sum of all member scores that are currently eligible and that will be eligible next epoch\\n   * @return eligibleTotal sum of all member scores that are currently eligible\\n   * @return nextEpochTotal sum of all member scores that will be eligible next epoch\\n   */\\n  function totalMemberScores()\\n    external\\n    view\\n    returns (uint256 eligibleTotal, uint256 nextEpochTotal);\\n\\n  /**\\n   * @notice Estimate the score for an existing member, given some changes in GFI and capital\\n   * @param memberAddress the member's address\\n   * @param gfi the change in gfi holdings, denominated in GFI\\n   * @param capital the change in gfi holdings, denominated in USDC\\n   * @return score resulting score for the member given the GFI and capital changes\\n   */\\n  function estimateMemberScore(\\n    address memberAddress,\\n    int256 gfi,\\n    int256 capital\\n  ) external view returns (uint256 score);\\n\\n  /// @notice Finalize all unfinalized epochs. Causes the reserve splitter to distribute\\n  ///  if there are unfinalized epochs so all possible rewards are distributed.\\n  function finalizeEpochs() external;\\n}\\n\",\"keccak256\":\"0xa09539c8699ccfff34370c19b0c50b841f5a1a1169e9550c88041683957241c5\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipLedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\ninterface IMembershipLedger {\\n  /**\\n   * @notice Set `addr`s allocated rewards back to 0\\n   * @param addr address to reset rewards on\\n   */\\n  function resetRewards(address addr) external;\\n\\n  /**\\n   * @notice Allocate `amount` rewards for `addr` but do not send them\\n   * @param addr address to distribute rewards to\\n   * @param amount amount of rewards to allocate for `addr`\\n   * @return rewards total allocated to `addr`\\n   */\\n  function allocateRewardsTo(address addr, uint256 amount) external returns (uint256 rewards);\\n\\n  /**\\n   * @notice Get the rewards allocated to a certain `addr`\\n   * @param addr the address to check pending rewards for\\n   * @return rewards pending rewards for `addr`\\n   */\\n  function getPendingRewardsFor(address addr) external view returns (uint256 rewards);\\n\\n  /**\\n   * @notice Get the alpha parameter for the cobb douglas function. Will always be in (0,1).\\n   * @return numerator numerator for the alpha param\\n   * @return denominator denominator for the alpha param\\n   */\\n  function alpha() external view returns (uint128 numerator, uint128 denominator);\\n}\\n\",\"keccak256\":\"0x56bfc0d3ed5f532e3f36387d705f047252ba3cbeb8374e4bc51ed59a68197a33\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipOrchestrator.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\nimport {Context} from \\\"../cake/Context.sol\\\";\\n\\nstruct CapitalDeposit {\\n  /// Address of the asset being deposited\\n  /// @dev must be supported in CapitalAssets.sol\\n  address assetAddress;\\n  /// Id of the nft\\n  uint256 id;\\n}\\n\\nstruct Deposit {\\n  /// Amount of gfi to deposit\\n  uint256 gfi;\\n  /// List of capital deposits\\n  CapitalDeposit[] capitalDeposits;\\n}\\n\\nstruct DepositResult {\\n  uint256 membershipId;\\n  uint256 gfiPositionId;\\n  uint256[] capitalPositionIds;\\n}\\n\\nstruct ERC20Withdrawal {\\n  uint256 id;\\n  uint256 amount;\\n}\\n\\nstruct Withdrawal {\\n  /// List of gfi token ids to withdraw\\n  ERC20Withdrawal[] gfiPositions;\\n  /// List of capital token ids to withdraw\\n  uint256[] capitalPositions;\\n}\\n\\n/**\\n * @title MembershipOrchestrator\\n * @notice Externally facing gateway to all Goldfinch membership functionality.\\n * @author Goldfinch\\n */\\ninterface IMembershipOrchestrator {\\n  /**\\n   * @notice Deposit multiple assets defined in `multiDeposit`. Assets can include GFI, Staked Fidu,\\n   *  and others.\\n   * @param deposit struct describing all the assets to deposit\\n   * @return ids all of the ids of the created depoits, in the same order as deposit. If GFI is\\n   *  present, it will be the first id.\\n   */\\n  function deposit(Deposit calldata deposit) external returns (DepositResult memory);\\n\\n  /**\\n   * @notice Withdraw multiple assets defined in `multiWithdraw`. Assets can be GFI or capital\\n   *  positions ids. Caller must have been permitted to act upon all of the positions.\\n   * @param withdrawal all of the GFI and Capital ids to withdraw\\n   */\\n  function withdraw(Withdrawal calldata withdrawal) external;\\n\\n  /**\\n   * @notice Collect all membership rewards for the caller.\\n   * @return how many rewards were collected and sent to caller\\n   */\\n  function collectRewards() external returns (uint256);\\n\\n  /**\\n   * @notice Harvest the rewards, interest, redeemable principal, or other assets\\n   *  associated with the underlying capital asset. For example, if given a PoolToken,\\n   *  this will collect the GFI rewards (if available), redeemable interest, and\\n   *  redeemable principal, and send that to the owner of the capital position.\\n   * @param capitalPositionIds id of the capital position to harvest the underlying asset of\\n   */\\n  function harvest(uint256[] calldata capitalPositionIds) external;\\n\\n  /**\\n   * @notice Check how many rewards are claimable at this moment in time for caller.\\n   * @param addr the address to check claimable rewards for\\n   * @return how many rewards could be claimed by a call to `collectRewards`\\n   */\\n  function claimableRewards(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Check the voting power of a given address\\n   * @param addr the address to check the voting power of\\n   * @return the voting power\\n   */\\n  function votingPower(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Get all GFI in Membership held by `addr`. This returns the current eligible amount and the\\n   *  total amount of GFI.\\n   * @param addr the owner\\n   * @return eligibleAmount how much GFI is currently eligible for rewards\\n   * @return totalAmount how much GFI is currently eligible for rewards\\n   */\\n  function totalGFIHeldBy(\\n    address addr\\n  ) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n\\n  /**\\n   * @notice Get all capital, denominated in USDC, in Membership held by `addr`. This returns the current\\n   *  eligible amount and the total USDC value of capital.\\n   * @param addr the owner\\n   * @return eligibleAmount how much USDC of capital is currently eligible for rewards\\n   * @return totalAmount how much  USDC of capital is currently eligible for rewards\\n   */\\n  function totalCapitalHeldBy(\\n    address addr\\n  ) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n\\n  /**\\n   * @notice Get the member score of `addr`\\n   * @param addr the owner\\n   * @return eligibleScore the currently eligible score\\n   * @return totalScore the total score that will be eligible next epoch\\n   *\\n   * @dev if eligibleScore == totalScore then there are no changes between now and the next epoch\\n   */\\n  function memberScoreOf(\\n    address addr\\n  ) external view returns (uint256 eligibleScore, uint256 totalScore);\\n\\n  /**\\n   * @notice Estimate rewards for a given epoch. For epochs at or before lastFinalizedEpoch\\n   *  this will be the fixed, accurate reward for the epoch. For the current and other\\n   *  non-finalized epochs, this will be the value as if the epoch were finalized in that\\n   *  moment.\\n   * @param epoch epoch to estimate the rewards of\\n   * @return rewards associated with `epoch`\\n   */\\n  function estimateRewardsFor(uint256 epoch) external view returns (uint256);\\n\\n  /**\\n   * @notice Calculate what the Membership Score would be if a `gfi` amount of GFI and `capital` amount\\n   *  of Capital denominated in USDC were deposited.\\n   * @param gfi amount of GFI to estimate with\\n   * @param capital amount of capital to estimate with, denominated in USDC\\n   * @return score the resulting score\\n   */\\n  function calculateMemberScore(uint256 gfi, uint256 capital) external view returns (uint256 score);\\n\\n  /**\\n   * @notice Get the sum of all member scores that are currently eligible and that will be eligible next epoch\\n   * @return eligibleTotal sum of all member scores that are currently eligible\\n   * @return nextEpochTotal sum of all member scores that will be eligible next epoch\\n   */\\n  function totalMemberScores()\\n    external\\n    view\\n    returns (uint256 eligibleTotal, uint256 nextEpochTotal);\\n\\n  /**\\n   * @notice Estimate the score for an existing member, given some changes in GFI and capital\\n   * @param memberAddress the member's address\\n   * @param gfi the change in gfi holdings, denominated in GFI\\n   * @param capital the change in gfi holdings, denominated in USDC\\n   * @return score resulting score for the member given the GFI and capital changes\\n   */\\n  function estimateMemberScore(\\n    address memberAddress,\\n    int256 gfi,\\n    int256 capital\\n  ) external view returns (uint256 score);\\n\\n  /// @notice Finalize all unfinalized epochs. Causes the reserve splitter to distribute\\n  ///  if there are unfinalized epochs so all possible rewards are distributed.\\n  function finalizeEpochs() external;\\n}\\n\",\"keccak256\":\"0xe0d22d7f841a6607c722b3cc0ce200c76ec16c0dba86454bffa0e6d0c5403677\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity >=0.6.12;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n\\nstruct Position {\\n  // address owning the position\\n  address owner;\\n  // how much of the position is eligible as of checkpointEpoch\\n  uint256 eligibleAmount;\\n  // how much of the postion is eligible the epoch after checkpointEpoch\\n  uint256 nextEpochAmount;\\n  // when the position was first created\\n  uint256 createdTimestamp;\\n  // epoch of the last checkpoint\\n  uint256 checkpointEpoch;\\n}\\n\\n/**\\n * @title IMembershipVault\\n * @notice Track assets held by owners in a vault, as well as the total held in the vault. Assets\\n *  are not accounted for until the next epoch for MEV protection.\\n * @author Goldfinch\\n */\\ninterface IMembershipVault is IERC721Upgradeable {\\n  /**\\n   * @notice Emitted when an owner has adjusted their holdings in a vault\\n   * @param owner the owner increasing their holdings\\n   * @param eligibleAmount the new eligible amount\\n   * @param nextEpochAmount the new next epoch amount\\n   */\\n  event AdjustedHoldings(address indexed owner, uint256 eligibleAmount, uint256 nextEpochAmount);\\n\\n  /**\\n   * @notice Emitted when the total within the vault has changed\\n   * @param eligibleAmount new current amount\\n   * @param nextEpochAmount new next epoch amount\\n   */\\n  event VaultTotalUpdate(uint256 eligibleAmount, uint256 nextEpochAmount);\\n\\n  /**\\n   * @notice Get the current value of `owner`. This changes depending on the current\\n   *  block.timestamp as increased holdings are not accounted for until the subsequent epoch.\\n   * @param owner address owning the positions\\n   * @return sum of all positions held by an address\\n   */\\n  function currentValueOwnedBy(address owner) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the total value in the vault as of block.timestamp\\n   * @return total value in the vault as of block.timestamp\\n   */\\n  function currentTotal() external view returns (uint256);\\n\\n  /**\\n   * @notice Get the total value in the vault as of epoch\\n   * @return total value in the vault as of epoch\\n   */\\n  function totalAtEpoch(uint256 epoch) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the position owned by `owner`\\n   * @return position owned by `owner`\\n   */\\n  function positionOwnedBy(address owner) external view returns (Position memory);\\n\\n  /**\\n   * @notice Record an adjustment in holdings. Eligible assets will update this epoch and\\n   *  total assets will become eligible the subsequent epoch.\\n   * @param owner the owner to checkpoint\\n   * @param eligibleAmount amount of points to apply to the current epoch\\n   * @param nextEpochAmount amount of points to apply to the next epoch\\n   * @return id of the position\\n   */\\n  function adjustHoldings(\\n    address owner,\\n    uint256 eligibleAmount,\\n    uint256 nextEpochAmount\\n  ) external returns (uint256);\\n\\n  /**\\n   * @notice Checkpoint a specific owner & the vault total\\n   * @param owner the owner to checkpoint\\n   *\\n   * @dev to collect rewards, this must be called before `increaseHoldings` or\\n   *  `decreaseHoldings`. Those functions must call checkpoint internally\\n   *  so the historical data will be lost otherwise.\\n   */\\n  function checkpoint(address owner) external;\\n}\\n\",\"keccak256\":\"0x5979e109a0a813e0db1de7167625a77f35dab12d184d2eedf1be7ad9706974f7\",\"license\":\"MIT\"},\"contracts/interfaces/IPoolTokens.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"./openzeppelin/IERC721.sol\\\";\\n\\ninterface IPoolTokens is IERC721 {\\n  struct TokenInfo {\\n    address pool;\\n    uint256 tranche;\\n    uint256 principalAmount;\\n    uint256 principalRedeemed;\\n    uint256 interestRedeemed;\\n  }\\n\\n  struct MintParams {\\n    uint256 principalAmount;\\n    uint256 tranche;\\n  }\\n\\n  struct PoolInfo {\\n    uint256 totalMinted;\\n    uint256 totalPrincipalRedeemed;\\n    bool created;\\n  }\\n\\n  /**\\n   * @notice Called by pool to create a debt position in a particular tranche and amount\\n   * @param params Struct containing the tranche and the amount\\n   * @param to The address that should own the position\\n   * @return tokenId The token ID (auto-incrementing integer across all pools)\\n   */\\n  function mint(MintParams calldata params, address to) external returns (uint256);\\n\\n  /**\\n   * @notice Redeem principal and interest on a pool token. Called by valid pools as part of their redemption\\n   *  flow\\n   * @param tokenId pool token id\\n   * @param principalRedeemed principal to redeem. This cannot exceed the token's principal amount, and\\n   *  the redemption cannot cause the pool's total principal redeemed to exceed the pool's total minted\\n   *  principal\\n   * @param interestRedeemed interest to redeem.\\n   */\\n  function redeem(uint256 tokenId, uint256 principalRedeemed, uint256 interestRedeemed) external;\\n\\n  /**\\n   * @notice Withdraw a pool token's principal up to the token's principalAmount. Called by valid pools\\n   *  as part of their withdraw flow before the pool is locked (i.e. before the principal is committed)\\n   * @param tokenId pool token id\\n   * @param principalAmount principal to withdraw\\n   */\\n  function withdrawPrincipal(uint256 tokenId, uint256 principalAmount) external;\\n\\n  /**\\n   * @notice Burns a specific ERC721 token and removes deletes the token metadata for PoolTokens, BackerReards,\\n   *  and BackerStakingRewards\\n   * @param tokenId uint256 id of the ERC721 token to be burned.\\n   */\\n  function burn(uint256 tokenId) external;\\n\\n  /**\\n   * @notice Called by the GoldfinchFactory to register the pool as a valid pool. Only valid pools can mint/redeem\\n   * tokens\\n   * @param newPool The address of the newly created pool\\n   */\\n  function onPoolCreated(address newPool) external;\\n\\n  function getTokenInfo(uint256 tokenId) external view returns (TokenInfo memory);\\n\\n  function getPoolInfo(address pool) external view returns (PoolInfo memory);\\n\\n  /// @notice Query if `pool` is a valid pool. A pool is valid if it was created by the Goldfinch Factory\\n  function validPool(address pool) external view returns (bool);\\n\\n  function isApprovedOrOwner(address spender, uint256 tokenId) external view returns (bool);\\n\\n  /**\\n   * @notice Splits a pool token into two smaller positions. The original token is burned and all\\n   * its associated data is deleted.\\n   * @param tokenId id of the token to split.\\n   * @param newPrincipal1 principal amount for the first token in the split. The principal amount for the\\n   *  second token in the split is implicitly the original token's principal amount less newPrincipal1\\n   * @return tokenId1 id of the first token in the split\\n   * @return tokenId2 id of the second token in the split\\n   */\\n  function splitToken(\\n    uint256 tokenId,\\n    uint256 newPrincipal1\\n  ) external returns (uint256 tokenId1, uint256 tokenId2);\\n\\n  /**\\n   * @notice Mint event emitted for a new TranchedPool deposit or when an existing pool token is\\n   *  split\\n   * @param owner address to which the token was minted\\n   * @param pool tranched pool that the deposit was in\\n   * @param tokenId ERC721 tokenId\\n   * @param amount the deposit amount\\n   * @param tranche id of the tranche of the deposit\\n   */\\n  event TokenMinted(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    uint256 tranche\\n  );\\n\\n  /**\\n   * @notice Redeem event emitted when interest and/or principal is redeemed in the token's pool\\n   * @param owner owner of the pool token\\n   * @param pool tranched pool that the token belongs to\\n   * @param principalRedeemed amount of principal redeemed from the pool\\n   * @param interestRedeemed amount of interest redeemed from the pool\\n   * @param tranche id of the tranche the token belongs to\\n   */\\n  event TokenRedeemed(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 principalRedeemed,\\n    uint256 interestRedeemed,\\n    uint256 tranche\\n  );\\n\\n  /**\\n   * @notice Burn event emitted when the token owner/operator manually burns the token or burns\\n   *  it implicitly by splitting it\\n   * @param owner owner of the pool token\\n   * @param pool tranched pool that the token belongs to\\n   */\\n  event TokenBurned(address indexed owner, address indexed pool, uint256 indexed tokenId);\\n\\n  /**\\n   * @notice Split event emitted when the token owner/operator splits the token\\n   * @param pool tranched pool to which the orginal and split tokens belong\\n   * @param tokenId id of the original token that was split\\n   * @param newTokenId1 id of the first split token\\n   * @param newPrincipal1 principalAmount of the first split token\\n   * @param newTokenId2 id of the second split token\\n   * @param newPrincipal2 principalAmount of the second split token\\n   */\\n  event TokenSplit(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 newTokenId1,\\n    uint256 newPrincipal1,\\n    uint256 newTokenId2,\\n    uint256 newPrincipal2\\n  );\\n\\n  /**\\n   * @notice Principal Withdrawn event emitted when a token's principal is withdrawn from the pool\\n   *  BEFORE the pool's drawdown period\\n   * @param pool tranched pool of the token\\n   * @param principalWithdrawn amount of principal withdrawn from the pool\\n   */\\n  event TokenPrincipalWithdrawn(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 principalWithdrawn,\\n    uint256 tranche\\n  );\\n}\\n\",\"keccak256\":\"0x3f39c0ccd7c2dde572a8a7ef3c823ae5232eae0f074668c3b0222bd1a6b1dc4d\",\"license\":\"MIT\"},\"contracts/interfaces/IRouter.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\n/// @title IRouter\\n/// @author landakram\\n/// @notice This contract provides service discovery for contracts using the cake framework.\\n///   It can be used in conjunction with the convenience methods defined in the `Routing.Context`\\n///   and `Routing.Keys` libraries.\\ninterface IRouter {\\n  event SetContract(bytes4 indexed key, address indexed addr);\\n\\n  /// @notice Associate a routing key to a contract address\\n  /// @dev This function is only callable by the Router admin\\n  /// @param key A routing key (defined in the `Routing.Keys` libary)\\n  /// @param addr A contract address\\n  function setContract(bytes4 key, address addr) external;\\n}\\n\",\"keccak256\":\"0xe2a04ffb3198fa9de6b8252e1c406eff3dfc0bf7555e2d420bf5e87925fa4d43\",\"license\":\"MIT\"},\"contracts/interfaces/ISeniorPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport {ITranchedPool} from \\\"./ITranchedPool.sol\\\";\\nimport {ISeniorPoolEpochWithdrawals} from \\\"./ISeniorPoolEpochWithdrawals.sol\\\";\\n\\nabstract contract ISeniorPool is ISeniorPoolEpochWithdrawals {\\n  uint256 public sharePrice;\\n  uint256 public totalLoansOutstanding;\\n  uint256 public totalWritedowns;\\n\\n  function deposit(uint256 amount) external virtual returns (uint256 depositShares);\\n\\n  function depositWithPermit(\\n    uint256 amount,\\n    uint256 deadline,\\n    uint8 v,\\n    bytes32 r,\\n    bytes32 s\\n  ) external virtual returns (uint256 depositShares);\\n\\n  /**\\n   * @notice Withdraw `usdcAmount` of USDC, bypassing the epoch withdrawal system. Callable\\n   * by Zapper only.\\n   */\\n  function withdraw(uint256 usdcAmount) external virtual returns (uint256 amount);\\n\\n  /**\\n   * @notice Withdraw `fiduAmount` of FIDU converted to USDC at the current share price,\\n   * bypassing the epoch withdrawal system. Callable by Zapper only\\n   */\\n  function withdrawInFidu(uint256 fiduAmount) external virtual returns (uint256 amount);\\n\\n  function invest(ITranchedPool pool) external virtual returns (uint256);\\n\\n  function estimateInvestment(ITranchedPool pool) external view virtual returns (uint256);\\n\\n  function redeem(uint256 tokenId) external virtual;\\n\\n  function writedown(uint256 tokenId) external virtual;\\n\\n  function calculateWritedown(\\n    uint256 tokenId\\n  ) external view virtual returns (uint256 writedownAmount);\\n\\n  function sharesOutstanding() external view virtual returns (uint256);\\n\\n  function assets() external view virtual returns (uint256);\\n\\n  function getNumShares(uint256 amount) public view virtual returns (uint256);\\n\\n  event DepositMade(address indexed capitalProvider, uint256 amount, uint256 shares);\\n  event WithdrawalMade(address indexed capitalProvider, uint256 userAmount, uint256 reserveAmount);\\n  event InterestCollected(address indexed payer, uint256 amount);\\n  event PrincipalCollected(address indexed payer, uint256 amount);\\n  event ReserveFundsCollected(address indexed user, uint256 amount);\\n  event ReserveSharesCollected(address indexed user, address indexed reserve, uint256 amount);\\n\\n  event PrincipalWrittenDown(address indexed tranchedPool, int256 amount);\\n  event InvestmentMadeInSenior(address indexed tranchedPool, uint256 amount);\\n  event InvestmentMadeInJunior(address indexed tranchedPool, uint256 amount);\\n}\\n\",\"keccak256\":\"0x4b29697012980b05c2be579a75bad466eb8236754b5212aa8ef644767ff1046f\",\"license\":\"MIT\"},\"contracts/interfaces/ISeniorPoolEpochWithdrawals.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\n\\npragma experimental ABIEncoderV2;\\n\\ninterface ISeniorPoolEpochWithdrawals {\\n  /**\\n   * @notice A withdrawal epoch\\n   * @param endsAt timestamp the epoch ends\\n   * @param fiduRequested amount of fidu requested in the epoch, including fidu\\n   *                      carried over from previous epochs\\n   * @param fiduLiquidated Amount of fidu that was liquidated at the end of this epoch\\n   * @param usdcAllocated Amount of usdc that was allocated to liquidate fidu.\\n   *                      Does not consider withdrawal fees.\\n   */\\n  struct Epoch {\\n    uint256 endsAt;\\n    uint256 fiduRequested;\\n    uint256 fiduLiquidated;\\n    uint256 usdcAllocated;\\n  }\\n\\n  /**\\n   * @notice A user's request for withdrawal\\n   * @param epochCursor id of next epoch the user can liquidate their request\\n   * @param fiduRequested amount of fidu left to liquidate since last checkpoint\\n   * @param usdcWithdrawable amount of usdc available for a user to withdraw\\n   */\\n  struct WithdrawalRequest {\\n    uint256 epochCursor;\\n    uint256 usdcWithdrawable;\\n    uint256 fiduRequested;\\n  }\\n\\n  /**\\n   * @notice Returns the amount of unallocated usdc in the senior pool, taking into account\\n   *         usdc that _will_ be allocated to withdrawals when a checkpoint happens\\n   */\\n  function usdcAvailable() external view returns (uint256);\\n\\n  /// @notice Current duration of withdrawal epochs, in seconds\\n  function epochDuration() external view returns (uint256);\\n\\n  /// @notice Update epoch duration\\n  function setEpochDuration(uint256 newEpochDuration) external;\\n\\n  /// @notice The current withdrawal epoch\\n  function currentEpoch() external view returns (Epoch memory);\\n\\n  /// @notice Get request by tokenId. A request is considered active if epochCursor > 0.\\n  function withdrawalRequest(uint256 tokenId) external view returns (WithdrawalRequest memory);\\n\\n  /**\\n   * @notice Submit a request to withdraw `fiduAmount` of FIDU. Request is rejected\\n   * if caller already owns a request token. A non-transferrable request token is\\n   * minted to the caller\\n   * @return tokenId token minted to caller\\n   */\\n  function requestWithdrawal(uint256 fiduAmount) external returns (uint256 tokenId);\\n\\n  /**\\n   * @notice Add `fiduAmount` FIDU to a withdrawal request for `tokenId`. Caller\\n   * must own tokenId\\n   */\\n  function addToWithdrawalRequest(uint256 fiduAmount, uint256 tokenId) external;\\n\\n  /**\\n   * @notice Cancel request for tokenId. The fiduRequested (minus a fee) is returned\\n   * to the caller. Caller must own tokenId.\\n   * @return fiduReceived the fidu amount returned to the caller\\n   */\\n  function cancelWithdrawalRequest(uint256 tokenId) external returns (uint256 fiduReceived);\\n\\n  /**\\n   * @notice Transfer the usdcWithdrawable of request for tokenId to the caller.\\n   * Caller must own tokenId\\n   */\\n  function claimWithdrawalRequest(uint256 tokenId) external returns (uint256 usdcReceived);\\n\\n  /// @notice Emitted when the epoch duration is changed\\n  event EpochDurationChanged(uint256 newDuration);\\n\\n  /// @notice Emitted when a new withdraw request has been created\\n  event WithdrawalRequested(\\n    uint256 indexed epochId,\\n    uint256 indexed tokenId,\\n    address indexed operator,\\n    uint256 fiduRequested\\n  );\\n\\n  /// @notice Emitted when a user adds to their existing withdraw request\\n  /// @param epochId epoch that the withdraw was added to\\n  /// @param tokenId id of token that represents the position being added to\\n  /// @param operator address that added to the request\\n  /// @param fiduRequested amount of additional fidu added to request\\n  event WithdrawalAddedTo(\\n    uint256 indexed epochId,\\n    uint256 indexed tokenId,\\n    address indexed operator,\\n    uint256 fiduRequested\\n  );\\n\\n  /// @notice Emitted when a withdraw request has been canceled\\n  event WithdrawalCanceled(\\n    uint256 indexed epochId,\\n    uint256 indexed tokenId,\\n    address indexed operator,\\n    uint256 fiduCanceled,\\n    uint256 reserveFidu\\n  );\\n\\n  /// @notice Emitted when an epoch has been checkpointed\\n  /// @param epochId id of epoch that ended\\n  /// @param endTime timestamp the epoch ended\\n  /// @param fiduRequested amount of FIDU oustanding when the epoch ended\\n  /// @param usdcAllocated amount of USDC allocated to liquidate FIDU\\n  /// @param fiduLiquidated amount of FIDU liquidated using `usdcAllocated`\\n  event EpochEnded(\\n    uint256 indexed epochId,\\n    uint256 endTime,\\n    uint256 fiduRequested,\\n    uint256 usdcAllocated,\\n    uint256 fiduLiquidated\\n  );\\n\\n  /// @notice Emitted when an epoch could not be finalized and is extended instead\\n  /// @param epochId id of epoch that was extended\\n  /// @param newEndTime new epoch end time\\n  /// @param oldEndTime previous epoch end time\\n  event EpochExtended(uint256 indexed epochId, uint256 newEndTime, uint256 oldEndTime);\\n}\\n\",\"keccak256\":\"0x6dcde0dc692a196f464d950ff81e01032c1a606b980413f862b297a86936051c\",\"license\":\"MIT\"},\"contracts/interfaces/IStakingRewards.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity >=0.6.12;\\n\\npragma experimental ABIEncoderV2;\\n\\nimport {IERC721} from \\\"./openzeppelin/IERC721.sol\\\";\\nimport {IERC721Metadata} from \\\"./openzeppelin/IERC721Metadata.sol\\\";\\nimport {IERC721Enumerable} from \\\"./openzeppelin/IERC721Enumerable.sol\\\";\\n\\ninterface IStakingRewards is IERC721, IERC721Metadata, IERC721Enumerable {\\n  /// @notice Get the staking rewards position\\n  /// @param tokenId id of the position token\\n  /// @return position the position\\n  function getPosition(uint256 tokenId) external view returns (StakedPosition memory position);\\n\\n  /// @notice Unstake an amount of `stakingToken()` (FIDU, FiduUSDCCurveLP, etc) associated with\\n  ///   a given position and transfer to msg.sender. Any remaining staked amount will continue to\\n  ///   accrue rewards.\\n  /// @dev This function checkpoints rewards\\n  /// @param tokenId A staking position token ID\\n  /// @param amount Amount of `stakingToken()` to be unstaked from the position\\n  function unstake(uint256 tokenId, uint256 amount) external;\\n\\n  /// @notice Add `amount` to an existing FIDU position (`tokenId`)\\n  /// @param tokenId A staking position token ID\\n  /// @param amount Amount of `stakingToken()` to be added to tokenId's position\\n  function addToStake(uint256 tokenId, uint256 amount) external;\\n\\n  /// @notice Returns the staked balance of a given position token.\\n  /// @dev The value returned is the bare amount, not the effective amount. The bare amount represents\\n  ///   the number of tokens the user has staked for a given position. The effective amount is the bare\\n  ///   amount multiplied by the token's underlying asset type multiplier. This multiplier is a crypto-\\n  ///   economic parameter determined by governance.\\n  /// @param tokenId A staking position token ID\\n  /// @return Amount of staked tokens denominated in `stakingToken().decimals()`\\n  function stakedBalanceOf(uint256 tokenId) external view returns (uint256);\\n\\n  /// @notice Deposit to FIDU and USDC into the Curve LP, and stake your Curve LP tokens in the same transaction.\\n  /// @param fiduAmount The amount of FIDU to deposit\\n  /// @param usdcAmount The amount of USDC to deposit\\n  function depositToCurveAndStakeFrom(\\n    address nftRecipient,\\n    uint256 fiduAmount,\\n    uint256 usdcAmount\\n  ) external;\\n\\n  /// @notice \\\"Kick\\\" a user's reward multiplier. If they are past their lock-up period, their reward\\n  ///   multiplier will be reset to 1x.\\n  /// @dev This will also checkpoint their rewards up to the current time.\\n  function kick(uint256 tokenId) external;\\n\\n  /// @notice Accumulated rewards per token at the last checkpoint\\n  function accumulatedRewardsPerToken() external view returns (uint256);\\n\\n  /// @notice The block timestamp when rewards were last checkpointed\\n  function lastUpdateTime() external view returns (uint256);\\n\\n  /// @notice Claim rewards for a given staked position\\n  /// @param tokenId A staking position token ID\\n  /// @return amount of rewards claimed\\n  function getReward(uint256 tokenId) external returns (uint256);\\n\\n  /* ========== EVENTS ========== */\\n\\n  event RewardAdded(uint256 reward);\\n  event Staked(\\n    address indexed user,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    StakedPositionType positionType,\\n    uint256 baseTokenExchangeRate\\n  );\\n  event DepositedAndStaked(\\n    address indexed user,\\n    uint256 depositedAmount,\\n    uint256 indexed tokenId,\\n    uint256 amount\\n  );\\n  event DepositedToCurve(\\n    address indexed user,\\n    uint256 fiduAmount,\\n    uint256 usdcAmount,\\n    uint256 tokensReceived\\n  );\\n  event DepositedToCurveAndStaked(\\n    address indexed user,\\n    uint256 fiduAmount,\\n    uint256 usdcAmount,\\n    uint256 indexed tokenId,\\n    uint256 amount\\n  );\\n  event AddToStake(\\n    address indexed user,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    StakedPositionType positionType\\n  );\\n  event Unstaked(\\n    address indexed user,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    StakedPositionType positionType\\n  );\\n  event UnstakedMultiple(address indexed user, uint256[] tokenIds, uint256[] amounts);\\n  event RewardPaid(address indexed user, uint256 indexed tokenId, uint256 reward);\\n  event RewardsParametersUpdated(\\n    address indexed who,\\n    uint256 targetCapacity,\\n    uint256 minRate,\\n    uint256 maxRate,\\n    uint256 minRateAtPercent,\\n    uint256 maxRateAtPercent\\n  );\\n  event EffectiveMultiplierUpdated(\\n    address indexed who,\\n    StakedPositionType positionType,\\n    uint256 multiplier\\n  );\\n}\\n\\n/// @notice Indicates which ERC20 is staked\\nenum StakedPositionType {\\n  Fidu,\\n  CurveLP\\n}\\n\\nstruct Rewards {\\n  uint256 totalUnvested;\\n  uint256 totalVested;\\n  // @dev DEPRECATED (definition kept for storage slot)\\n  //   For legacy vesting positions, this was used in the case of slashing.\\n  //   For non-vesting positions, this is unused.\\n  uint256 totalPreviouslyVested;\\n  uint256 totalClaimed;\\n  uint256 startTime;\\n  // @dev DEPRECATED (definition kept for storage slot)\\n  //   For legacy vesting positions, this is the endTime of the vesting.\\n  //   For non-vesting positions, this is 0.\\n  uint256 endTime;\\n}\\n\\nstruct StakedPosition {\\n  // @notice Staked amount denominated in `stakingToken().decimals()`\\n  uint256 amount;\\n  // @notice Struct describing rewards owed with vesting\\n  Rewards rewards;\\n  // @notice Multiplier applied to staked amount when locking up position\\n  uint256 leverageMultiplier;\\n  // @notice Time in seconds after which position can be unstaked\\n  uint256 lockedUntil;\\n  // @notice Type of the staked position\\n  StakedPositionType positionType;\\n  // @notice Multiplier applied to staked amount to denominate in `baseStakingToken().decimals()`\\n  // @dev This field should not be used directly; it may be 0 for staked positions created prior to GIP-1.\\n  //  If you need this field, use `safeEffectiveMultiplier()`, which correctly handles old staked positions.\\n  uint256 unsafeEffectiveMultiplier;\\n  // @notice Exchange rate applied to staked amount to denominate in `baseStakingToken().decimals()`\\n  // @dev This field should not be used directly; it may be 0 for staked positions created prior to GIP-1.\\n  //  If you need this field, use `safeBaseTokenExchangeRate()`, which correctly handles old staked positions.\\n  uint256 unsafeBaseTokenExchangeRate;\\n}\\n\",\"keccak256\":\"0x9df006b4cd4966a605ab6a9871ca4dd76200467c9d1d177691c4e9f9323eac8f\",\"license\":\"MIT\"},\"contracts/interfaces/ITranchedPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport {IV2CreditLine} from \\\"./IV2CreditLine.sol\\\";\\n\\nabstract contract ITranchedPool {\\n  IV2CreditLine public creditLine;\\n  uint256 public createdAt;\\n  enum Tranches {\\n    Reserved,\\n    Senior,\\n    Junior\\n  }\\n\\n  struct TrancheInfo {\\n    uint256 id;\\n    uint256 principalDeposited;\\n    uint256 principalSharePrice;\\n    uint256 interestSharePrice;\\n    uint256 lockedUntil;\\n  }\\n\\n  struct PoolSlice {\\n    TrancheInfo seniorTranche;\\n    TrancheInfo juniorTranche;\\n    uint256 totalInterestAccrued;\\n    uint256 principalDeployed;\\n  }\\n\\n  function initialize(\\n    address _config,\\n    address _borrower,\\n    uint256 _juniorFeePercent,\\n    uint256 _limit,\\n    uint256 _interestApr,\\n    uint256 _paymentPeriodInDays,\\n    uint256 _termInDays,\\n    uint256 _lateFeeApr,\\n    uint256 _principalGracePeriodInDays,\\n    uint256 _fundableAt,\\n    uint256[] calldata _allowedUIDTypes\\n  ) public virtual;\\n\\n  /**\\n   * @notice Get the array of all UID types that are allowed to interact with this pool.\\n   * @return array of UID types\\n   *\\n   * @dev This only exists on TranchedPools deployed from Nov 2022 onward\\n   */\\n  function getAllowedUIDTypes() external view virtual returns (uint256[] memory);\\n\\n  function getTranche(uint256 tranche) external view virtual returns (TrancheInfo memory);\\n\\n  function pay(uint256 amount) external virtual;\\n\\n  function poolSlices(uint256 index) external view virtual returns (PoolSlice memory);\\n\\n  function lockJuniorCapital() external virtual;\\n\\n  function lockPool() external virtual;\\n\\n  function initializeNextSlice(uint256 _fundableAt) external virtual;\\n\\n  function totalJuniorDeposits() external view virtual returns (uint256);\\n\\n  function drawdown(uint256 amount) external virtual;\\n\\n  function setFundableAt(uint256 timestamp) external virtual;\\n\\n  function deposit(uint256 tranche, uint256 amount) external virtual returns (uint256 tokenId);\\n\\n  function assess() external virtual;\\n\\n  function depositWithPermit(\\n    uint256 tranche,\\n    uint256 amount,\\n    uint256 deadline,\\n    uint8 v,\\n    bytes32 r,\\n    bytes32 s\\n  ) external virtual returns (uint256 tokenId);\\n\\n  function availableToWithdraw(\\n    uint256 tokenId\\n  ) external view virtual returns (uint256 interestRedeemable, uint256 principalRedeemable);\\n\\n  function withdraw(\\n    uint256 tokenId,\\n    uint256 amount\\n  ) external virtual returns (uint256 interestWithdrawn, uint256 principalWithdrawn);\\n\\n  function withdrawMax(\\n    uint256 tokenId\\n  ) external virtual returns (uint256 interestWithdrawn, uint256 principalWithdrawn);\\n\\n  function withdrawMultiple(\\n    uint256[] calldata tokenIds,\\n    uint256[] calldata amounts\\n  ) external virtual;\\n\\n  function numSlices() external view virtual returns (uint256);\\n}\\n\",\"keccak256\":\"0xf3eb3dba7ff7196678629ea4cfc72fd5389dda5d1380420a807181359af62573\",\"license\":\"MIT\"},\"contracts/interfaces/IV2CreditLine.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport {ICreditLine} from \\\"./ICreditLine.sol\\\";\\n\\nabstract contract IV2CreditLine is ICreditLine {\\n  function principal() external view virtual returns (uint256);\\n\\n  function totalInterestAccrued() external view virtual returns (uint256);\\n\\n  function termStartTime() external view virtual returns (uint256);\\n\\n  function setLimit(uint256 newAmount) external virtual;\\n\\n  function setMaxLimit(uint256 newAmount) external virtual;\\n\\n  function setBalance(uint256 newBalance) external virtual;\\n\\n  function setPrincipal(uint256 _principal) external virtual;\\n\\n  function setTotalInterestAccrued(uint256 _interestAccrued) external virtual;\\n\\n  function drawdown(uint256 amount) external virtual;\\n\\n  function assess() external virtual returns (uint256, uint256, uint256);\\n\\n  function initialize(\\n    address _config,\\n    address owner,\\n    address _borrower,\\n    uint256 _limit,\\n    uint256 _interestApr,\\n    uint256 _paymentPeriodInDays,\\n    uint256 _termInDays,\\n    uint256 _lateFeeApr,\\n    uint256 _principalGracePeriodInDays\\n  ) public virtual;\\n\\n  function setTermEndTime(uint256 newTermEndTime) external virtual;\\n\\n  function setNextDueTime(uint256 newNextDueTime) external virtual;\\n\\n  function setInterestOwed(uint256 newInterestOwed) external virtual;\\n\\n  function setPrincipalOwed(uint256 newPrincipalOwed) external virtual;\\n\\n  function setInterestAccruedAsOf(uint256 newInterestAccruedAsOf) external virtual;\\n\\n  function setWritedownAmount(uint256 newWritedownAmount) external virtual;\\n\\n  function setLastFullPaymentTime(uint256 newLastFullPaymentTime) external virtual;\\n\\n  function setLateFeeApr(uint256 newLateFeeApr) external virtual;\\n}\\n\",\"keccak256\":\"0xb05d96a7cdf5b8c032278872215e51ccae19d256be5c6474f33ad651459f0e3b\",\"license\":\"MIT\"},\"contracts/interfaces/openzeppelin/IERC165.sol\":{\"content\":\"pragma solidity >=0.6.0;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n  /**\\n   * @dev Returns true if this contract implements the interface defined by\\n   * `interfaceId`. See the corresponding\\n   * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n   * to learn more about how these ids are created.\\n   *\\n   * This function call must use less than 30 000 gas.\\n   */\\n  function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0xbbdb8f6dfaecd47a0d65bee707877d6974a0e0da6c02403ad5ce00590bd97497\"},\"contracts/interfaces/openzeppelin/IERC721.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >= & reference other >= pragma interfaces.\\n// NOTE: Modified to reference our updated pragma version of IERC165\\nimport \\\"./IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721 is IERC165 {\\n  event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n  event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n  event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n  /**\\n   * @dev Returns the number of NFTs in ``owner``'s account.\\n   */\\n  function balanceOf(address owner) external view returns (uint256 balance);\\n\\n  /**\\n   * @dev Returns the owner of the NFT specified by `tokenId`.\\n   */\\n  function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n  /**\\n   * @dev Transfers a specific NFT (`tokenId`) from one account (`from`) to\\n   * another (`to`).\\n   *\\n   *\\n   *\\n   * Requirements:\\n   * - `from`, `to` cannot be zero.\\n   * - `tokenId` must be owned by `from`.\\n   * - If the caller is not `from`, it must be have been allowed to move this\\n   * NFT by either {approve} or {setApprovalForAll}.\\n   */\\n  function safeTransferFrom(address from, address to, uint256 tokenId) external;\\n\\n  /**\\n   * @dev Transfers a specific NFT (`tokenId`) from one account (`from`) to\\n   * another (`to`).\\n   *\\n   * Requirements:\\n   * - If the caller is not `from`, it must be approved to move this NFT by\\n   * either {approve} or {setApprovalForAll}.\\n   */\\n  function transferFrom(address from, address to, uint256 tokenId) external;\\n\\n  function approve(address to, uint256 tokenId) external;\\n\\n  function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n  function setApprovalForAll(address operator, bool _approved) external;\\n\\n  function isApprovedForAll(address owner, address operator) external view returns (bool);\\n\\n  function safeTransferFrom(\\n    address from,\\n    address to,\\n    uint256 tokenId,\\n    bytes calldata data\\n  ) external;\\n}\\n\",\"keccak256\":\"0x839a8ac86a7be93a842f708f7e41a5a56a6e44ee9dcc2559b99042122dd76048\"},\"contracts/interfaces/openzeppelin/IERC721Enumerable.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\nimport \\\"./IERC721.sol\\\";\\n\\n/**\\n * @title ERC-721 Non-Fungible Token Standard, optional enumeration extension\\n * @dev See https://eips.ethereum.org/EIPS/eip-721\\n */\\ninterface IERC721Enumerable is IERC721 {\\n  function totalSupply() external view returns (uint256);\\n\\n  function tokenOfOwnerByIndex(\\n    address owner,\\n    uint256 index\\n  ) external view returns (uint256 tokenId);\\n\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x8612dba35cd477a6392985f5309e9ca495fa21d8a07176956a53207a54da898d\"},\"contracts/interfaces/openzeppelin/IERC721Metadata.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\nimport \\\"./IERC721.sol\\\";\\n\\n/**\\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\\n * @dev See https://eips.ethereum.org/EIPS/eip-721\\n */\\ninterface IERC721Metadata is IERC721 {\\n  function name() external view returns (string memory);\\n\\n  function symbol() external view returns (string memory);\\n\\n  function tokenURI(uint256 tokenId) external view returns (string memory);\\n}\\n\",\"keccak256\":\"0x56c56c47d03d0ea452a13842ad2e3e5b81b3689c484efd35a48f3977e9b929d8\"},\"contracts/library/Arrays.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nlibrary Arrays {\\n  /**\\n   * @notice Removes an item from an array and replaces it with the (previously) last element in the array so\\n   *  there are no empty spaces. Assumes that `array` is not empty and index is valid.\\n   * @param array the array to remove from\\n   * @param index index of the item to remove\\n   * @return newLength length of the resulting array\\n   * @return replaced whether or not the index was replaced. Only false if the removed item was the last item\\n   *  in the array.\\n   */\\n  function reorderingRemove(\\n    uint256[] storage array,\\n    uint256 index\\n  ) internal returns (uint256 newLength, bool replaced) {\\n    newLength = array.length - 1;\\n    replaced = newLength != index;\\n\\n    if (replaced) {\\n      array[index] = array[newLength];\\n    }\\n\\n    array.pop();\\n  }\\n}\\n\",\"keccak256\":\"0x4c274f5879ad74a49cc5560af636bc1acf063fb264b98204f451a98f515d0315\",\"license\":\"MIT\"},\"contracts/library/FiduConversions.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nlibrary FiduConversions {\\n  uint256 internal constant FIDU_MANTISSA = 1e18;\\n  uint256 internal constant USDC_MANTISSA = 1e6;\\n  uint256 internal constant USDC_TO_FIDU_MANTISSA = FIDU_MANTISSA / USDC_MANTISSA;\\n  uint256 internal constant FIDU_USDC_CONVERSION_DECIMALS = USDC_TO_FIDU_MANTISSA * FIDU_MANTISSA;\\n\\n  /**\\n   * @notice Convert Usdc to Fidu using a given share price\\n   * @param usdcAmount amount of usdc to convert\\n   * @param sharePrice share price to use to convert\\n   * @return fiduAmount converted fidu amount\\n   */\\n  function usdcToFidu(uint256 usdcAmount, uint256 sharePrice) internal pure returns (uint256) {\\n    return sharePrice > 0 ? (usdcAmount * FIDU_USDC_CONVERSION_DECIMALS) / sharePrice : 0;\\n  }\\n\\n  /**\\n   * @notice Convert fidu to USDC using a given share price\\n   * @param fiduAmount fidu amount to convert\\n   * @param sharePrice share price to do the conversion with\\n   * @return usdcReceived usdc that will be received after converting\\n   */\\n  function fiduToUsdc(uint256 fiduAmount, uint256 sharePrice) internal pure returns (uint256) {\\n    return (fiduAmount * sharePrice) / FIDU_USDC_CONVERSION_DECIMALS;\\n  }\\n}\\n\",\"keccak256\":\"0x1210040e7e0011209d38b1f779f60401eb815a9311f9117c73e9b85cae797134\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/CapitalLedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721ReceiverUpgradeable.sol\\\";\\n\\nimport {Context} from \\\"../../../cake/Context.sol\\\";\\nimport {Base} from \\\"../../../cake/Base.sol\\\";\\nimport \\\"../../../cake/Routing.sol\\\" as Routing;\\n\\nimport {Arrays} from \\\"../../../library/Arrays.sol\\\";\\nimport {CapitalAssets} from \\\"./assets/CapitalAssets.sol\\\";\\nimport {UserEpochTotals, UserEpochTotal} from \\\"./UserEpochTotals.sol\\\";\\n\\nimport {ICapitalLedger, CapitalAssetType} from \\\"../../../interfaces/ICapitalLedger.sol\\\";\\n\\nusing Routing.Context for Context;\\nusing UserEpochTotals for UserEpochTotal;\\nusing Arrays for uint256[];\\n\\n/**\\n * @title CapitalLedger\\n * @notice Track Capital held by owners and ensure the Capital has been accounted for.\\n * @author Goldfinch\\n */\\ncontract CapitalLedger is ICapitalLedger, Base, IERC721ReceiverUpgradeable {\\n  /// Thrown when attempting to deposit nothing\\n  error ZeroDeposit();\\n  /// Thrown when withdrawing an invalid amount for a position\\n  error InvalidWithdrawAmount(uint256 requested, uint256 max);\\n  /// Thrown when depositing from address(0)\\n  error InvalidOwnerIndex();\\n  /// Thrown when querying token supply with an index greater than the supply\\n  error IndexGreaterThanTokenSupply();\\n\\n  struct Position {\\n    // Owner of the position\\n    address owner;\\n    // Index of the position in the ownership array\\n    uint256 ownedIndex;\\n    // Address of the underlying asset represented by the position\\n    address assetAddress;\\n    // USDC equivalent value of the position. This is first written\\n    // on position deposit but may be updated on harvesting or kicking\\n    uint256 usdcEquivalent;\\n    // When the position was deposited\\n    uint256 depositTimestamp;\\n  }\\n\\n  struct ERC721Data {\\n    // Id of the ERC721 assetAddress' token\\n    uint256 assetTokenId;\\n  }\\n\\n  /// Data for positions in the vault. Always has a corresponding\\n  /// entry at the same index in ERC20Data or ERC721 data, but never\\n  /// both.\\n  mapping(uint256 => Position) public positions;\\n\\n  // Which positions an address owns\\n  mapping(address => uint256[]) private owners;\\n\\n  /// Total held by each user, while being aware of the deposit epoch\\n  mapping(address => UserEpochTotal) private totals;\\n\\n  // The current position index\\n  uint256 private positionCounter;\\n\\n  /// ERC721 data corresponding to positions, data has the same index\\n  /// as its corresponding position.\\n  mapping(uint256 => ERC721Data) private erc721Datas;\\n\\n  /// @notice Construct the contract\\n  constructor(Context _context) Base(_context) {}\\n\\n  /// @inheritdoc ICapitalLedger\\n  function depositERC721(\\n    address owner,\\n    address assetAddress,\\n    uint256 assetTokenId\\n  ) external onlyOperator(Routing.Keys.MembershipOrchestrator) returns (uint256) {\\n    if (CapitalAssets.getSupportedType(context, assetAddress) != CapitalAssetType.ERC721) {\\n      revert CapitalAssets.InvalidAsset(assetAddress);\\n    }\\n    if (!CapitalAssets.isValid(context, assetAddress, assetTokenId)) {\\n      revert CapitalAssets.InvalidAssetWithId(assetAddress, assetTokenId);\\n    }\\n\\n    IERC721Upgradeable asset = IERC721Upgradeable(assetAddress);\\n    uint256 usdcEquivalent = CapitalAssets.getUsdcEquivalent(context, asset, assetTokenId);\\n    uint256 positionId = _mintPosition(owner, assetAddress, usdcEquivalent);\\n\\n    erc721Datas[positionId] = ERC721Data({assetTokenId: assetTokenId});\\n\\n    totals[owner].recordIncrease(usdcEquivalent);\\n\\n    asset.safeTransferFrom(address(context.membershipOrchestrator()), address(this), assetTokenId);\\n\\n    emit CapitalERC721Deposit({\\n      owner: owner,\\n      assetAddress: assetAddress,\\n      positionId: positionId,\\n      assetTokenId: assetTokenId,\\n      usdcEquivalent: usdcEquivalent\\n    });\\n\\n    return positionId;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function erc721IdOf(uint256 positionId) public view returns (uint256) {\\n    return erc721Datas[positionId].assetTokenId;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function withdraw(uint256 positionId) external onlyOperator(Routing.Keys.MembershipOrchestrator) {\\n    Position memory position = positions[positionId];\\n    delete positions[positionId];\\n\\n    CapitalAssetType assetType = CapitalAssets.getSupportedType(context, position.assetAddress);\\n\\n    totals[position.owner].recordDecrease(position.usdcEquivalent, position.depositTimestamp);\\n\\n    uint256[] storage ownersList = owners[position.owner];\\n    (, bool replaced) = ownersList.reorderingRemove(position.ownedIndex);\\n    if (replaced) {\\n      positions[ownersList[position.ownedIndex]].ownedIndex = position.ownedIndex;\\n    }\\n\\n    if (assetType == CapitalAssetType.ERC721) {\\n      uint256 assetTokenId = erc721Datas[positionId].assetTokenId;\\n      delete erc721Datas[positionId];\\n\\n      IERC721Upgradeable(position.assetAddress).safeTransferFrom(\\n        address(this),\\n        position.owner,\\n        assetTokenId\\n      );\\n\\n      emit CapitalERC721Withdrawal(\\n        position.owner,\\n        positionId,\\n        position.assetAddress,\\n        position.depositTimestamp\\n      );\\n    } else {\\n      revert InvalidAssetType(assetType);\\n    }\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function harvest(uint256 positionId) external onlyOperator(Routing.Keys.MembershipOrchestrator) {\\n    Position memory position = positions[positionId];\\n    CapitalAssetType assetType = CapitalAssets.getSupportedType(context, position.assetAddress);\\n\\n    if (assetType != CapitalAssetType.ERC721) revert InvalidAssetType(assetType);\\n\\n    CapitalAssets.harvest(\\n      context,\\n      position.owner,\\n      IERC721Upgradeable(position.assetAddress),\\n      erc721Datas[positionId].assetTokenId\\n    );\\n\\n    emit CapitalERC721Harvest({positionId: positionId, assetAddress: position.assetAddress});\\n\\n    _kick(positionId);\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function assetAddressOf(uint256 positionId) public view returns (address) {\\n    return positions[positionId].assetAddress;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function ownerOf(uint256 positionId) public view returns (address) {\\n    return positions[positionId].owner;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function totalsOf(\\n    address addr\\n  ) external view returns (uint256 eligibleAmount, uint256 totalAmount) {\\n    return totals[addr].getTotals();\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function totalSupply() public view returns (uint256) {\\n    return positionCounter;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function balanceOf(address addr) external view returns (uint256) {\\n    return owners[addr].length;\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256) {\\n    if (index >= owners[owner].length) revert InvalidOwnerIndex();\\n\\n    return owners[owner][index];\\n  }\\n\\n  /// @inheritdoc ICapitalLedger\\n  function tokenByIndex(uint256 index) external view returns (uint256) {\\n    if (index >= totalSupply()) revert IndexGreaterThanTokenSupply();\\n\\n    return index + 1;\\n  }\\n\\n  /// @inheritdoc IERC721ReceiverUpgradeable\\n  function onERC721Received(\\n    address,\\n    address,\\n    uint256,\\n    bytes calldata\\n  ) external pure returns (bytes4) {\\n    return IERC721ReceiverUpgradeable.onERC721Received.selector;\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // Private\\n\\n  function _mintPosition(\\n    address owner,\\n    address assetAddress,\\n    uint256 usdcEquivalent\\n  ) private returns (uint256 positionId) {\\n    positionCounter++;\\n\\n    positionId = positionCounter;\\n    positions[positionId] = Position({\\n      owner: owner,\\n      ownedIndex: owners[owner].length,\\n      assetAddress: assetAddress,\\n      usdcEquivalent: usdcEquivalent,\\n      depositTimestamp: block.timestamp\\n    });\\n\\n    owners[owner].push(positionId);\\n  }\\n\\n  /**\\n   * @notice Update the USDC equivalent value of the position, based on the current,\\n   *  point-in-time valuation of the underlying asset.\\n   * @param positionId id of the position\\n   */\\n  function _kick(uint256 positionId) internal {\\n    Position memory position = positions[positionId];\\n    CapitalAssetType assetType = CapitalAssets.getSupportedType(context, position.assetAddress);\\n\\n    if (assetType != CapitalAssetType.ERC721) revert InvalidAssetType(assetType);\\n\\n    // Remove the original USDC equivalent value from the owner's total\\n    totals[position.owner].recordDecrease(position.usdcEquivalent, position.depositTimestamp);\\n\\n    uint256 usdcEquivalent = CapitalAssets.getUsdcEquivalent(\\n      context,\\n      IERC721Upgradeable(position.assetAddress),\\n      erc721Datas[positionId].assetTokenId\\n    );\\n\\n    //  Set the new value & add the new USDC equivalent value back to the owner's total\\n    positions[positionId].usdcEquivalent = usdcEquivalent;\\n    totals[position.owner].recordInstantIncrease(usdcEquivalent, position.depositTimestamp);\\n\\n    emit CapitalPositionAdjustment({\\n      positionId: positionId,\\n      assetAddress: position.assetAddress,\\n      usdcEquivalent: usdcEquivalent\\n    });\\n  }\\n}\\n\",\"keccak256\":\"0x908811ad7b9a6b83720638c211839faaf3e8d19eb13700654e3cc3263394c49e\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/Epochs.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nlibrary Epochs {\\n  uint256 internal constant EPOCH_SECONDS = 7 days;\\n\\n  /**\\n   * @notice Get the epoch containing the timestamp `s`\\n   * @param s the timestamp\\n   * @return corresponding epoch\\n   */\\n  function fromSeconds(uint256 s) internal pure returns (uint256) {\\n    return s / EPOCH_SECONDS;\\n  }\\n\\n  /**\\n   * @notice Get the current epoch for the block.timestamp\\n   * @return current epoch\\n   */\\n  function current() internal view returns (uint256) {\\n    return fromSeconds(block.timestamp);\\n  }\\n\\n  /**\\n   * @notice Get the start timestamp for the current epoch\\n   * @return current epoch start timestamp\\n   */\\n  function currentEpochStartTimestamp() internal view returns (uint256) {\\n    return startOf(current());\\n  }\\n\\n  /**\\n   * @notice Get the previous epoch given block.timestamp\\n   * @return previous epoch\\n   */\\n  function previous() internal view returns (uint256) {\\n    return current() - 1;\\n  }\\n\\n  /**\\n   * @notice Get the next epoch given block.timestamp\\n   * @return next epoch\\n   */\\n  function next() internal view returns (uint256) {\\n    return current() + 1;\\n  }\\n\\n  /**\\n   * @notice Get the Unix timestamp of the start of `epoch`\\n   * @param epoch the epoch\\n   * @return unix timestamp\\n   */\\n  function startOf(uint256 epoch) internal pure returns (uint256) {\\n    return epoch * EPOCH_SECONDS;\\n  }\\n}\\n\",\"keccak256\":\"0xa1d08c0e15d503ca9fa94d6633109cfc221fd31b0a8889685c8c3582efcd758b\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/UserEpochTotals.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport {Epochs} from \\\"./Epochs.sol\\\";\\n\\n/// @dev Epoch Awareness\\n/// The Membership system relies on an epoch structure to incentivize economic behavior. Deposits\\n/// are tracked by epoch and only count toward yield enhancements if they have been present for\\n/// an entire epoch. This means positions have a specific lifetime:\\n/// 1. Deposit Epoch - Positions are in the membership system but do not count for rewards as they\\n///      were not in since the beginning of the epoch. Deposits are externally triggered.\\n/// 2. Eligible Epoch - Positions are in the membership system and count for rewards as they have been\\n///      present the entire epoch.\\n/// 3. Withdrawal Epoch - Positions are no longer in the membership system and forfeit their rewards\\n///      for the withdrawal epoch. Rewards are forfeited as the position was not present for the\\n///      entire epoch when withdrawn. Withdrawals are externally triggered.\\n///\\n/// All of these deposits' value is summed together to calculate the yield enhancement. A naive\\n/// approach is, for every summation query, iterate over all deposits and check if they were deposited\\n/// in the current epoch (so case (1)) or in a previous epoch (so case (2)). This has a high gas\\n/// cost, so we use another approach: UserEpochTotal.\\n///\\n/// UserEpochTotal is the total of the user's deposits as of its lastEpochUpdate- the last epoch that\\n/// the total was updated in. For that epoch, it tracks:\\n/// 1. Eligible Amount - The sum of deposits that are in their Eligible Epoch for the current epoch\\n/// 2. Total Amount - The sum of deposits that will be in their Eligible Epoch for the next epoch\\n///\\n/// It is not necessary to track previous epochs as deposits in those will already be eligible, or they\\n/// will have been withdrawn and already affected the eligible amount.\\n///\\n/// It is also unnecessary to track future epochs beyond the next one. Any deposit in the current epoch\\n/// will become eligible in the next epoch. It is not possible to have a deposit (or withdrawal) take\\n/// effect any further in the future.\\n\\nstruct UserEpochTotal {\\n  /// Total amount that will be eligible for membership, after `checkpointedAt` epoch\\n  uint256 totalAmount;\\n  /// Amount eligible for membership, as of `checkpointedAt` epoch\\n  uint256 eligibleAmount;\\n  /// Last epoch the total was checkpointed at\\n  uint256 checkpointedAt;\\n}\\n\\nlibrary UserEpochTotals {\\n  error InvalidDepositEpoch(uint256 epoch);\\n\\n  /// @notice Record an increase of `amount` in the `total`. This is counted toward the\\n  ///  nextAmount as deposits must be present for an entire epoch to be valid.\\n  /// @param total storage pointer to the UserEpochTotal\\n  /// @param amount amount to increase the total by\\n  function recordIncrease(UserEpochTotal storage total, uint256 amount) internal {\\n    _checkpoint(total);\\n\\n    total.totalAmount += amount;\\n  }\\n\\n  /// @notice Record an increase of `amount` instantly based on the time of the deposit.\\n  ///  This is counted either:\\n  ///  1. To just the totalAmount if the deposit was this epoch\\n  ///  2. To both the totalAmount and eligibleAmount if the deposit was before this epoch\\n  /// @param total storage pointer to the UserEpochTotal\\n  /// @param amount amount to increase the total by\\n  function recordInstantIncrease(\\n    UserEpochTotal storage total,\\n    uint256 amount,\\n    uint256 depositTimestamp\\n  ) internal {\\n    uint256 depositEpoch = Epochs.fromSeconds(depositTimestamp);\\n    if (depositEpoch > Epochs.current()) revert InvalidDepositEpoch(depositEpoch);\\n\\n    _checkpoint(total);\\n\\n    if (depositEpoch < Epochs.current()) {\\n      // If this was deposited earlier, then it also counts towards eligible\\n      total.eligibleAmount += amount;\\n    }\\n\\n    total.totalAmount += amount;\\n  }\\n\\n  /// @notice Record a decrease of `amount` in the `total`. Depending on the `depositTimestamp`\\n  ///  this will withdraw from the total's currentAmount (if it's withdrawn from an already valid deposit)\\n  ///  or from the total's nextAmount (if it's withdrawn from a deposit this epoch).\\n  /// @param total storage pointer to the UserEpochTotal\\n  /// @param amount amount to decrease the total by\\n  /// @param depositTimestamp timestamp of the deposit associated with `amount`\\n  function recordDecrease(\\n    UserEpochTotal storage total,\\n    uint256 amount,\\n    uint256 depositTimestamp\\n  ) internal {\\n    uint256 depositEpoch = Epochs.fromSeconds(depositTimestamp);\\n    if (depositEpoch > Epochs.current()) revert InvalidDepositEpoch(depositEpoch);\\n\\n    _checkpoint(total);\\n\\n    total.totalAmount -= amount;\\n\\n    if (depositEpoch < Epochs.current()) {\\n      // If this was deposited earlier, then it would have been promoted in _checkpoint and must be removed.\\n      total.eligibleAmount -= amount;\\n    }\\n  }\\n\\n  /// @notice Get the up-to-date current and next amount for the `_total`. UserEpochTotals\\n  ///  may have a lastEpochUpdate of long ago. This returns the current and next amounts as if it had\\n  ///  been checkpointed just now.\\n  /// @param _total storage pointer to the UserEpochTotal\\n  /// @return current the currentAmount of the UserEpochTotal\\n  /// @return next the nextAmount of the UserEpochTotal\\n  function getTotals(\\n    UserEpochTotal storage _total\\n  ) internal view returns (uint256 current, uint256 next) {\\n    UserEpochTotal memory total = _total;\\n    if (Epochs.current() == total.checkpointedAt) {\\n      return (total.eligibleAmount, total.totalAmount);\\n    }\\n\\n    return (total.totalAmount, total.totalAmount);\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // Private\\n\\n  function _checkpoint(UserEpochTotal storage total) private {\\n    // Only promote the total amount if we've moved to the next epoch\\n    // after the last checkpoint.\\n    if (Epochs.current() <= total.checkpointedAt) return;\\n\\n    total.eligibleAmount = total.totalAmount;\\n\\n    total.checkpointedAt = Epochs.current();\\n  }\\n}\\n\",\"keccak256\":\"0x8ad9fdcd3280e201fb31459ee466b4b2d64e21a0e36069adcce0f7670a62c52a\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/CapitalAssets.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity 0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\n/// @dev Adding a New Asset Type\\n/// 1. Create a new library in this directory of the name <AssetType>Asset.sol\\n/// 2. The library must implement the same functions as the other assets:\\n///   2.1 AssetType\\n///   2.2 isType\\n///   2.3 isValid - if the asset is an ERC721\\n///   2.4 getUsdcEquivalent\\n/// 3. Import the library below in \\\"Supported assets\\\"\\n/// 4. Add the new library to the corresponding `getSupportedType` function in this file\\n/// 5. Add the new library to the corresponding `getUsdcEquivalent` function in this file\\n/// 6. If the new library is an ERC721, add it to the `isValid` function in this file\\n\\n// Supported assets\\nimport {PoolTokensAsset} from \\\"./PoolTokensAsset.sol\\\";\\nimport {StakedFiduAsset} from \\\"./StakedFiduAsset.sol\\\";\\n\\nusing Routing.Context for Context;\\n\\nlibrary CapitalAssets {\\n  /// Thrown when an asset has been requested that does not exist\\n  error InvalidAsset(address assetAddress);\\n  /// Thrown when an asset has been requested that does not exist\\n  error InvalidAssetWithId(address assetAddress, uint256 assetTokenId);\\n\\n  /**\\n   * @notice Check if a specific `assetAddress` has a corresponding capital asset\\n   *  implementation and returns the asset type. Returns INVALID if no\\n   *  such asset exists.\\n   * @param context goldfinch context for routing\\n   * @param assetAddress the address of the asset's contract\\n   * @return type of the asset\\n   */\\n  function getSupportedType(\\n    Context context,\\n    address assetAddress\\n  ) internal view returns (CapitalAssetType) {\\n    if (StakedFiduAsset.isType(context, assetAddress)) return StakedFiduAsset.AssetType;\\n    if (PoolTokensAsset.isType(context, assetAddress)) return PoolTokensAsset.AssetType;\\n\\n    return CapitalAssetType.INVALID;\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // ERC721\\n\\n  /**\\n   * @notice Check if a specific token for a supported asset is valid or not. Returns false\\n   *  if the asset is not supported or the token is invalid\\n   * @param context goldfinch context for routing\\n   * @param assetAddress the address of the asset's contract\\n   * @param assetTokenId the token id\\n   * @return whether or not a specific token id of asset address is supported\\n   */\\n  function isValid(\\n    Context context,\\n    address assetAddress,\\n    uint256 assetTokenId\\n  ) internal view returns (bool) {\\n    if (StakedFiduAsset.isType(context, assetAddress))\\n      return StakedFiduAsset.isValid(context, assetTokenId);\\n    if (PoolTokensAsset.isType(context, assetAddress))\\n      return PoolTokensAsset.isValid(context, assetTokenId);\\n\\n    return false;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the ERC721 asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param asset ERC721 to evaluate\\n   * @param assetTokenId id of the token to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(\\n    Context context,\\n    IERC721Upgradeable asset,\\n    uint256 assetTokenId\\n  ) internal view returns (uint256) {\\n    if (PoolTokensAsset.isType(context, address(asset))) {\\n      return PoolTokensAsset.getUsdcEquivalent(context, assetTokenId);\\n    }\\n\\n    if (StakedFiduAsset.isType(context, address(asset))) {\\n      return StakedFiduAsset.getUsdcEquivalent(context, assetTokenId);\\n    }\\n\\n    revert InvalidAsset(address(asset));\\n  }\\n\\n  /**\\n   * @notice Harvests the associated rewards, interest, and other accrued assets\\n   *  associated with the asset token. For example, if given a PoolToken asset,\\n   *  this will collect the GFI rewards (if available), redeemable interest, and\\n   *  redeemable principal, and send that to the `owner`.\\n   * @param context goldfinch context for routing\\n   * @param owner address to send the harvested assets to\\n   * @param asset ERC721 to harvest\\n   * @param assetTokenId id of the token to harvest\\n   */\\n  function harvest(\\n    Context context,\\n    address owner,\\n    IERC721Upgradeable asset,\\n    uint256 assetTokenId\\n  ) internal {\\n    if (PoolTokensAsset.isType(context, address(asset))) {\\n      return PoolTokensAsset.harvest(context, owner, assetTokenId);\\n    }\\n\\n    if (StakedFiduAsset.isType(context, address(asset))) {\\n      return StakedFiduAsset.harvest(context, owner, assetTokenId);\\n    }\\n\\n    revert InvalidAsset(address(asset));\\n  }\\n}\\n\",\"keccak256\":\"0xcdfdb10a90edc9d4a7ddeb0bdf3dbc327dacf3e05a0f2a2b3c5c4138a390d2db\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/PoolTokensAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity 0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n// solhint-disable-next-line max-line-length\\nimport {SafeERC20Upgradeable as SafeERC20} from \\\"@openzeppelin/contracts-upgradeable/token/ERC20/utils/SafeERC20Upgradeable.sol\\\";\\n\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport {IPoolTokens} from \\\"../../../../interfaces/IPoolTokens.sol\\\";\\n\\nimport {ITranchedPool} from \\\"../../../../interfaces/ITranchedPool.sol\\\";\\n\\nusing Routing.Context for Context;\\nusing SafeERC20 for IERC20Upgradeable;\\n\\nlibrary PoolTokensAsset {\\n  /// Thrown when trying to harvest a pool token when not go-listed\\n  error NotGoListed(address owner);\\n\\n  CapitalAssetType public constant AssetType = CapitalAssetType.ERC721;\\n\\n  /**\\n   * @notice Get the type of asset that this contract adapts.\\n   * @return the asset type\\n   */\\n  function isType(Context context, address assetAddress) internal view returns (bool) {\\n    return assetAddress == address(context.poolTokens());\\n  }\\n\\n  /**\\n   * @notice Get whether or not the given asset is valid\\n   * @return true if the represented tranche is or may be drawn down (so true if assets are doing work)\\n   */\\n  function isValid(Context context, uint256 assetTokenId) internal view returns (bool) {\\n    IPoolTokens.TokenInfo memory tokenInfo = context.poolTokens().getTokenInfo(assetTokenId);\\n    ITranchedPool tranchedPool = ITranchedPool(tokenInfo.pool);\\n\\n    return tranchedPool.getTranche(tokenInfo.tranche).lockedUntil != 0;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the Pool Token asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param assetTokenId tokenId of the Pool Token to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(\\n    Context context,\\n    uint256 assetTokenId\\n  ) internal view returns (uint256) {\\n    IPoolTokens.TokenInfo memory tokenInfo = context.poolTokens().getTokenInfo(assetTokenId);\\n    return tokenInfo.principalAmount - tokenInfo.principalRedeemed;\\n  }\\n\\n  /**\\n   * @notice Harvest GFI rewards and redeemable interest and principal on PoolToken with id\\n   *  `assetTokenId` and send the harvested assets to `owner`.\\n   * @param context goldfinch context for routing\\n   * @param owner address to send the harvested assets to\\n   * @param assetTokenId id of the position to harvest\\n   */\\n  function harvest(Context context, address owner, uint256 assetTokenId) internal {\\n    IPoolTokens.TokenInfo memory tokenInfo = context.poolTokens().getTokenInfo(assetTokenId);\\n    ITranchedPool tranchedPool = ITranchedPool(tokenInfo.pool);\\n\\n    if (!context.go().goOnlyIdTypes(owner, getAllowedUIDs(tokenInfo.pool))) {\\n      revert NotGoListed(owner);\\n    }\\n\\n    (uint256 interestWithdrawn, uint256 principalWithdrawn) = tranchedPool.withdrawMax(\\n      assetTokenId\\n    );\\n    context.usdc().safeTransfer(owner, interestWithdrawn + principalWithdrawn);\\n\\n    try context.backerRewards().withdraw(assetTokenId) returns (uint256 rewards) {\\n      // Withdraw can throw if the pool is late or if it's an early pool and doesn't\\n      // have associated backer rewards. Try/catch so the interest and principal can\\n      // still be harvested.\\n\\n      context.gfi().safeTransfer(owner, rewards);\\n    } catch {}\\n  }\\n\\n  function getAllowedUIDs(address poolAddress) private view returns (uint256[] memory allowedUIDs) {\\n    // TranchedPools are non-upgradeable and have different capabilites. One of the differences\\n    // is the `getAllowedUIDTypes` function, which is only available in contracts deployed from\\n    // Nov 2022 onward. To get around this limitation, we hardcode the expected UID requirements\\n    // based on the pool address for previous contracts. Otherwise, we use the available method.\\n    // Pools below are listed in chronological order for convenience.\\n\\n    if (\\n      poolAddress == 0xefeB69eDf6B6999B0e3f2Fa856a2aCf3bdEA4ab5 || // almavest 3\\n      poolAddress == 0xaA2ccC5547f64C5dFfd0a624eb4aF2543A67bA65 || // tugende\\n      poolAddress == 0xc9BDd0D3B80CC6EfE79a82d850f44EC9B55387Ae || // cauris\\n      poolAddress == 0xe6C30756136e07eB5268c3232efBFBe645c1BA5A || // almavest 4\\n      poolAddress == 0x1d596D28A7923a22aA013b0e7082bbA23DAA656b // almavest 5\\n    ) {\\n      // Legacy pools that had custom checks upon signup\\n\\n      allowedUIDs = new uint256[](1);\\n      allowedUIDs[0] = 0;\\n      return allowedUIDs;\\n    }\\n\\n    if (poolAddress == 0x418749e294cAbce5A714EfcCC22a8AAde6F9dB57 /* almavest 6 */) {\\n      // Old pool that has internal UID check but does not provide a gas-efficient UID interface\\n      // Copied the pool's UID requirements below\\n\\n      allowedUIDs = new uint256[](1);\\n      allowedUIDs[0] = 0;\\n      return allowedUIDs;\\n    }\\n\\n    if (\\n      poolAddress == 0x00c27FC71b159a346e179b4A1608a0865e8A7470 || // stratos\\n      poolAddress == 0xd09a57127BC40D680Be7cb061C2a6629Fe71AbEf // cauris 2\\n    ) {\\n      // Old pools that have internal UID check but do not provide a gas-efficient UID interface\\n      // Copied the pools' UID requirements below\\n\\n      allowedUIDs = new uint256[](2);\\n      allowedUIDs[0] = 0;\\n      allowedUIDs[1] = 1;\\n      return allowedUIDs;\\n    }\\n\\n    if (\\n      poolAddress == 0xb26B42Dd5771689D0a7faEea32825ff9710b9c11 || // lend east 1\\n      poolAddress == 0x759f097f3153f5d62FF1C2D82bA78B6350F223e3 || // almavest 7\\n      poolAddress == 0x89d7C618a4EeF3065DA8ad684859a547548E6169 // addem capital\\n    ) {\\n      // Old pools that have internal UID check but do not provide a gas-efficient UID interface\\n      // Copied the pools' UID requirements below\\n\\n      allowedUIDs = new uint256[](4);\\n      allowedUIDs[0] = 0;\\n      allowedUIDs[1] = 1;\\n      allowedUIDs[2] = 3;\\n      allowedUIDs[3] = 4;\\n      return allowedUIDs;\\n    }\\n\\n    // All other and future pools implement getAllowedUIDTypes\\n    return ITranchedPool(poolAddress).getAllowedUIDTypes();\\n  }\\n}\\n\",\"keccak256\":\"0xcec80d90e200dbf6f4c2234dbcb2d48f521cb06fb3cd68e4bc91d11adc9f4c89\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/StakedFiduAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\n// solhint-disable-next-line max-line-length\\nimport {SafeERC20Upgradeable as SafeERC20} from \\\"@openzeppelin/contracts-upgradeable/token/ERC20/utils/SafeERC20Upgradeable.sol\\\";\\n\\nimport \\\"../../../../library/FiduConversions.sol\\\";\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport {IStakingRewards, StakedPositionType} from \\\"../../../../interfaces/IStakingRewards.sol\\\";\\nimport {ISeniorPool} from \\\"../../../../interfaces/ISeniorPool.sol\\\";\\n\\nusing Routing.Context for Context;\\nusing SafeERC20 for IERC20Upgradeable;\\n\\nlibrary StakedFiduAsset {\\n  CapitalAssetType public constant AssetType = CapitalAssetType.ERC721;\\n\\n  /**\\n   * @notice Get the type of asset that this contract adapts.\\n   * @return the asset type\\n   */\\n  function isType(Context context, address assetAddress) internal view returns (bool) {\\n    return assetAddress == address(context.stakingRewards());\\n  }\\n\\n  /**\\n   * @notice Get whether or not the given asset is valid\\n   * @return true if the asset is Fidu type (not CurveLP)\\n   */\\n  function isValid(Context context, uint256 assetTokenId) internal view returns (bool) {\\n    return\\n      context.stakingRewards().getPosition(assetTokenId).positionType == StakedPositionType.Fidu;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the ERC721 asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param assetTokenId id of the position to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(\\n    Context context,\\n    uint256 assetTokenId\\n  ) internal view returns (uint256) {\\n    uint256 stakedFiduBalance = context.stakingRewards().stakedBalanceOf(assetTokenId);\\n    return FiduConversions.fiduToUsdc(stakedFiduBalance, context.seniorPool().sharePrice());\\n  }\\n\\n  /**\\n   * @notice Harvest GFI rewards on a staked fidu token and send them to `owner`.\\n   * @param context goldfinch context for routing\\n   * @param owner address to send the GFI to\\n   * @param assetTokenId id of the position to harvest\\n   */\\n  function harvest(Context context, address owner, uint256 assetTokenId) internal {\\n    // Sends reward to owner (this contract)\\n    uint256 reward = context.stakingRewards().getReward(assetTokenId);\\n\\n    if (reward > 0) {\\n      context.gfi().safeTransfer(owner, reward);\\n    }\\n  }\\n}\\n\",\"keccak256\":\"0x81f580dbfd459ac332b6a024269f84d5adb22796b63b8f83cdc356fd5dd680fe\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a06040523480156200001157600080fd5b5060405162002b1238038062002b12833981016040819052620000349162000046565b6001600160a01b031660805262000078565b6000602082840312156200005957600080fd5b81516001600160a01b03811681146200007157600080fd5b9392505050565b608051612a3f620000d36000396000818161035f015281816105de01528181610639015281816106880152818161070e015281816108be0152818161093601528181610eb501528181610f58015261100d0152612a3f6000f3fe608060405234801561001057600080fd5b50600436106100bf5760003560e01c80634f6ccce71161007c5780634f6ccce71461016e5780636352211e1461018157806370a08231146101b757806399fbab88146101e0578063c4664c6314610262578063ddc632621461028e578063e305f306146102a157600080fd5b8063150b7a02146100c457806318160ddd146100f95780632e1a7d4d1461010b5780632f745c5914610120578063331ded1a14610133578063427d743214610146575b600080fd5b6100e36100d2366004612320565b630a85bd0160e11b95945050505050565b6040516100f091906123bf565b60405180910390f35b6003545b6040519081526020016100f0565b61011e6101193660046123d4565b6102c1565b005b6100fd61012e3660046123ed565b610546565b6100fd610141366004612419565b6105bc565b61015961015436600461245a565b6107e8565b604080519283526020830191909152016100f0565b6100fd61017c3660046123d4565b610814565b6101aa61018f3660046123d4565b6000908152602081905260409020546001600160a01b031690565b6040516100f09190612477565b6100fd6101c536600461245a565b6001600160a01b031660009081526001602052604090205490565b6102296101ee3660046123d4565b600060208190529081526040902080546001820154600283015460038401546004909401546001600160a01b03938416949293909116919085565b604080516001600160a01b039687168152602081019590955292909416918301919091526060820152608081019190915260a0016100f0565b6101aa6102703660046123d4565b6000908152602081905260409020600201546001600160a01b031690565b61011e61029c3660046123d4565b610849565b6100fd6102af3660046123d4565b60009081526004602052604090205490565b6000805160206129ea8339815191526102da81336109a8565b600082815260208181526040808320815160a08101835281546001600160a01b03808216835260018401805484880152600285018054928316968501968752600386018054606087015260048701805460808801528c8b52988a90526001600160a01b03199485169096559088905591169055908490559183905551909190610384907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b6060830151608084015184516001600160a01b031660009081526002602052604090209293506103b5929190610a44565b81516001600160a01b031660009081526001602090815260408220908401519091906103e2908390610acd565b915050801561042a578360200151600080848760200151815481106104095761040961248b565b90600052602060002001548152602001908152602001600020600101819055505b600183600181111561043e5761043e6124a1565b0361051a57600086815260046020819052604080832080549390558681015187519151632142170760e11b81526001600160a01b03909116926342842e0e9261048b9230928791016124b7565b600060405180830381600087803b1580156104a557600080fd5b505af11580156104b9573d6000803e3d6000fd5b5050865160408089015160808a015182518d81526001600160a01b0392831660208201529283015290911692507f50065562d2b38b7cc51ee877211c37a54ff469d129d1a67bfeb97e0c2994a316915060600160405180910390a25061053e565b826040516308a8fee960e31b815260040161053591906124db565b60405180910390fd5b505050505050565b6001600160a01b038216600090815260016020526040812054821061057e57604051638f832b9b60e01b815260040160405180910390fd5b6001600160a01b03831660009081526001602052604090208054839081106105a8576105a861248b565b906000526020600020015490505b92915050565b60006000805160206129ea8339815191526105d781336109a8565b60016106037f000000000000000000000000000000000000000000000000000000000000000086610a0b565b6001811115610614576106146124a1565b1461063457836040516337bce3c560e11b81526004016105359190612477565b61065f7f00000000000000000000000000000000000000000000000000000000000000008585610b56565b610680578383604051634eb9917160e11b8152600401610535929190612503565b8360006106ae7f00000000000000000000000000000000000000000000000000000000000000008387610b9c565b905060006106bd888884610beb565b604080516020808201835289825260008481526004825283812092519092556001600160a01b038c16825260029052209091506106fa9083610cb0565b826001600160a01b03166342842e0e61073b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610cd6565b30896040518463ffffffff1660e01b815260040161075b939291906124b7565b600060405180830381600087803b15801561077557600080fd5b505af1158015610789573d6000803e3d6000fd5b505060408051848152602081018a90529081018590526001600160a01b03808b1693508b1691507fb1c56a0ea823a5b59843a1c0223e87b70affc07e96fc346165322958cdef13949060600160405180910390a3979650505050505050565b6001600160a01b0381166000908152600260205260408120819061080b90610db4565b91509150915091565b600061081f60035490565b821061083e57604051633f7ee38f60e11b815260040160405180910390fd5b6105b6826001612532565b6000805160206129ea83398151915261086281336109a8565b600082815260208181526040808320815160a08101835281546001600160a01b0390811682526001830154948201949094526002820154909316918301829052600381015460608401526004015460808301529091906108e3907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b905060018160018111156108f9576108f96124a1565b1461091957806040516308a8fee960e31b815260040161053591906124db565b815160408084015160008781526004602052919091205461095d927f0000000000000000000000000000000000000000000000000000000000000000929091610e05565b837f54c43c33795a11f3152d46be48143a092092361e37f765f6f9da0251aabf1f9683604001516040516109919190612477565b60405180910390a26109a284610e59565b50505050565b6001600160a01b0381166109cf5760405163d92e233d60e01b815260040160405180910390fd5b6109d98282610fff565b610a075760405163889a56bb60e01b81523060048201526001600160a01b0382166024820152604401610535565b5050565b6000610a17838361110a565b15610a24575060016105b6565b610a2e838361113a565b15610a3b575060016105b6565b50600092915050565b6000610a4f8261114e565b9050610a5961115d565b811115610a7c57604051632029102760e21b815260048101829052602401610535565b610a858461116d565b82846000016000828254610a999190612545565b90915550610aa7905061115d565b8110156109a25782846001016000828254610ac29190612545565b909155505050505050565b81546000908190610ae090600190612545565b915050818114801590610b2957838281548110610aff57610aff61248b565b9060005260206000200154848481548110610b1c57610b1c61248b565b6000918252602090912001555b83805480610b3957610b39612558565b600190038181906000526020600020016000905590559250929050565b6000610b62848461110a565b15610b7857610b718483611199565b9050610b95565b610b82848461113a565b15610b9157610b71848361123a565b5060005b9392505050565b6000610ba8848461113a565b15610bb757610b718483611341565b610bc1848461110a565b15610bd057610b7184836113e2565b826040516337bce3c560e11b81526004016105359190612477565b6003805460009182610bfc8361256e565b9091555050600380546040805160a0810182526001600160a01b0397881680825260009081526001602081815284832080548286019081529a8c16858701908152606086019a8b52426080870190815288865285845296852095518654908e166001600160a01b03199182161787559b51868501555160028601805491909d169b169a909a17909a559651948201949094559051600490910155838652845493840185559381529390932001819055919050565b610cb98261116d565b80826000016000828254610ccd9190612532565b90915550505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d16573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3a9190612587565b6001600160a01b0316630c0450126000805160206129ea8339815191526040518263ffffffff1660e01b8152600401610d7391906123bf565b602060405180830381865afa158015610d90573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105b69190612587565b6040805160608101825282548152600183015460208201526002830154918101829052600091829190610de561115d565b03610dfb57602081015190519094909350915050565b5193849350915050565b610e0f848361113a565b15610e2457610e1f8484836114e3565b6109a2565b610e2e848361110a565b15610e3e57610e1f84848361175a565b816040516337bce3c560e11b81526004016105359190612477565b600081815260208181526040808320815160a08101835281546001600160a01b039081168252600183015494820194909452600282015490931691830182905260038101546060840152600401546080830152909190610eda907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b90506001816001811115610ef057610ef06124a1565b14610f1057806040516308a8fee960e31b815260040161053591906124db565b6060820151608083015183516001600160a01b03166000908152600260205260409020610f3e929091610a44565b6040808301516000858152600460205291822054610f7d917f000000000000000000000000000000000000000000000000000000000000000091610b9c565b600085815260208181526040808320600301849055608087015187516001600160a01b031684526002909252909120919250610fbb919083906117fd565b837f6a28020abc16896e42077f4597b339d5cdf310f437dee250bcfb161a8539b27a846040015183604051610ff1929190612503565b60405180910390a250505050565b6000816001600160a01b03167f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611069573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061108d9190612587565b6001600160a01b0316630c045012856040518263ffffffff1660e01b81526004016110b891906123bf565b602060405180830381865afa1580156110d5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110f99190612587565b6001600160a01b0316149392505050565b600061111e836001600160a01b031661187b565b6001600160a01b0316826001600160a01b031614905092915050565b600061111e836001600160a01b031661192a565b60006105b662093a80836125a4565b60006111684261114e565b905090565b806002015461117a61115d565b116111825750565b8054600182015561119161115d565b600290910155565b6000806111ae846001600160a01b031661187b565b6001600160a01b031663eb02c301846040518263ffffffff1660e01b81526004016111db91815260200190565b61018060405180830381865afa1580156111f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061121d9190612690565b608001516001811115611232576112326124a1565b149392505050565b60008061124f846001600160a01b031661192a565b6001600160a01b0316638c7a63ae846040518263ffffffff1660e01b815260040161127c91815260200190565b60a060405180830381865afa158015611299573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112bd9190612751565b8051602082015160405163d972e8ad60e01b81526004810191909152919250906001600160a01b0382169063d972e8ad9060240160a060405180830381865afa15801561130e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061133291906127ac565b60800151151595945050505050565b600080611356846001600160a01b031661192a565b6001600160a01b0316638c7a63ae846040518263ffffffff1660e01b815260040161138391815260200190565b60a060405180830381865afa1580156113a0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113c49190612751565b9050806060015181604001516113da9190612545565b949350505050565b6000806113f7846001600160a01b031661187b565b6001600160a01b031663aa04295f846040518263ffffffff1660e01b815260040161142491815260200190565b602060405180830381865afa158015611441573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061146591906127fc565b90506113da8161147d866001600160a01b03166119d9565b6001600160a01b031663872697296040518163ffffffff1660e01b8152600401602060405180830381865afa1580156114ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114de91906127fc565b611a88565b60006114f7846001600160a01b031661192a565b6001600160a01b0316638c7a63ae836040518263ffffffff1660e01b815260040161152491815260200190565b60a060405180830381865afa158015611541573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115659190612751565b805190915061157c6001600160a01b038616611abe565b6001600160a01b0316631852f200856115988560000151611b6d565b6040518363ffffffff1660e01b81526004016115b5929190612815565b602060405180830381865afa1580156115d2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115f6919061286b565b61161557836040516373bb9c8960e01b81526004016105359190612477565b604051632a8a9f1360e21b81526004810184905260009081906001600160a01b0384169063aa2a7c4c9060240160408051808303816000875af1158015611660573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611684919061288d565b90925090506116b9866116978385612532565b6116a98a6001600160a01b0316611ec3565b6001600160a01b03169190611f72565b6116cb876001600160a01b0316611fcd565b6001600160a01b0316632e1a7d4d866040518263ffffffff1660e01b81526004016116f891815260200190565b6020604051808303816000875af1925050508015611733575060408051601f3d908101601f19168201909252611730918101906127fc565b60015b156117515761174f87826116a98b6001600160a01b031661207c565b505b50505050505050565b600061176e846001600160a01b031661187b565b6001600160a01b0316631c4b774b836040518263ffffffff1660e01b815260040161179b91815260200190565b6020604051808303816000875af11580156117ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117de91906127fc565b905080156109a2576109a283826116a9876001600160a01b031661207c565b60006118088261114e565b905061181261115d565b81111561183557604051632029102760e21b815260048101829052602401610535565b61183e8461116d565b61184661115d565b81101561186757828460010160008282546118619190612532565b90915550505b82846000016000828254610ac29190612532565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156118bb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118df9190612587565b6001600160a01b0316630c0450127f5a31296b3cecaf3aaa3146a140f6ddf6d21caa95e28243dc507d90d7e883be796040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561196a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061198e9190612587565b6001600160a01b0316630c0450127f7c9945d349966e663465dd2ad9f3ebe33d671877c22c40ca3a051e02e14e15ff6040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611a19573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a3d9190612587565b6001600160a01b0316630c0450127fd4a8913f0cbda73931759328604779fb81c2513f90d252b9c4a96a5dd8327d886040518263ffffffff1660e01b8152600401610d7391906123bf565b6000670de0b6b3a7640000611aa0620f4240826125a4565b611aaa91906128b1565b611ab483856128b1565b610b9591906125a4565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611afe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b229190612587565b6001600160a01b0316630c0450127fc61c93ad97e9ad12d54663c76606860c6c3a3f53a59b88cd4bc1e3f43edc17956040518263ffffffff1660e01b8152600401610d7391906123bf565b606073efeb69edf6b6999b0e3f2fa856a2acf3bdea4ab56001600160a01b0383161480611bb6575073aa2ccc5547f64c5dffd0a624eb4af2543a67ba656001600160a01b038316145b80611bdd575073c9bdd0d3b80cc6efe79a82d850f44ec9b55387ae6001600160a01b038316145b80611c04575073e6c30756136e07eb5268c3232efbfbe645c1ba5a6001600160a01b038316145b80611c2b5750731d596d28a7923a22aa013b0e7082bba23daa656b6001600160a01b038316145b15611c855760015b604051908082528060200260200182016040528015611c5c578160200160208202803683370190505b509050600081600081518110611c7457611c7461248b565b602002602001018181525050919050565b6001600160a01b03821673418749e294cabce5a714efccc22a8aade6f9db5703611cb0576001611c33565b72c27fc71b159a346e179b4a1608a0865e8a74706001600160a01b0383161480611cf6575073d09a57127bc40d680be7cb061c2a6629fe71abef6001600160a01b038316145b15611d51576040805160028082526060820183529091602083019080368337019050509050600081600081518110611d3057611d3061248b565b602002602001018181525050600181600181518110611c7457611c7461248b565b73b26b42dd5771689d0a7faeea32825ff9710b9c116001600160a01b0383161480611d98575073759f097f3153f5d62ff1c2d82ba78b6350f223e36001600160a01b038316145b80611dbf57507389d7c618a4eef3065da8ad684859a547548e61696001600160a01b038316145b15611e5d5760408051600480825260a082019092529060208201608080368337019050509050600081600081518110611dfa57611dfa61248b565b602002602001018181525050600181600181518110611e1b57611e1b61248b565b602002602001018181525050600381600281518110611e3c57611e3c61248b565b602002602001018181525050600481600381518110611c7457611c7461248b565b816001600160a01b031663c78bed866040518163ffffffff1660e01b8152600401600060405180830381865afa158015611e9b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105b691908101906128d0565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611f03573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f279190612587565b6001600160a01b0316630c0450127fd6aca1be9729c13d677335161321649cccae6a591554772516700f986f942eaa6040518263ffffffff1660e01b8152600401610d7391906123bf565b611fc88363a9059cbb60e01b8484604051602401611f91929190612503565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b03199093169290921790915261212b565b505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561200d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120319190612587565b6001600160a01b0316630c0450127f1cd0c2e09edd1d00946872d4dfa90e139030cf08dd8b201be0c3e01ae1534c576040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156120bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120e09190612587565b6001600160a01b0316630c0450127f6fdcaa094af96c56039c701c590da2284d9e0c364f2dd8ee7d43419f0eefd2936040518263ffffffff1660e01b8152600401610d7391906123bf565b6000612180826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166121fd9092919063ffffffff16565b805190915015611fc8578080602001905181019061219e919061286b565b611fc85760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b6064820152608401610535565b60606113da848460008585843b6122565760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610535565b600080866001600160a01b03168587604051612272919061299a565b60006040518083038185875af1925050503d80600081146122af576040519150601f19603f3d011682016040523d82523d6000602084013e6122b4565b606091505b50915091506122c48282866122cf565b979650505050505050565b606083156122de575081610b95565b8251156122ee5782518084602001fd5b8160405162461bcd60e51b815260040161053591906129b6565b6001600160a01b038116811461231d57600080fd5b50565b60008060008060006080868803121561233857600080fd5b853561234381612308565b9450602086013561235381612308565b935060408601359250606086013567ffffffffffffffff8082111561237757600080fd5b818801915088601f83011261238b57600080fd5b81358181111561239a57600080fd5b8960208285010111156123ac57600080fd5b9699959850939650602001949392505050565b6001600160e01b031991909116815260200190565b6000602082840312156123e657600080fd5b5035919050565b6000806040838503121561240057600080fd5b823561240b81612308565b946020939093013593505050565b60008060006060848603121561242e57600080fd5b833561243981612308565b9250602084013561244981612308565b929592945050506040919091013590565b60006020828403121561246c57600080fd5b8135610b9581612308565b6001600160a01b0391909116815260200190565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b6001600160a01b039384168152919092166020820152604081019190915260600190565b60208101600283106124fd57634e487b7160e01b600052602160045260246000fd5b91905290565b6001600160a01b03929092168252602082015260400190565b634e487b7160e01b600052601160045260246000fd5b808201808211156105b6576105b661251c565b818103818111156105b6576105b661251c565b634e487b7160e01b600052603160045260246000fd5b6000600182016125805761258061251c565b5060010190565b60006020828403121561259957600080fd5b8151610b9581612308565b6000826125c157634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052604160045260246000fd5b60405160e0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b60405290565b60405160c0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b60405160a0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b604051601f8201601f1916810167ffffffffffffffff81118282101715612674576126746125c6565b604052919050565b80516002811061268b57600080fd5b919050565b60008183036101808112156126a457600080fd5b6126ac6125dc565b8351815260c0601f19830112156126c257600080fd5b6126ca612605565b91506020840151825260408401516020830152606084015160408301526080840151606083015260a0840151608083015260c084015160a083015281602082015260e08401516040820152610100840151606082015261272d610120850161267c565b608082015261014084015160a08201526101609093015160c0840152509092915050565b600060a0828403121561276357600080fd5b61276b612628565b825161277681612308565b80825250602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b600060a082840312156127be57600080fd5b6127c6612628565b82518152602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b60006020828403121561280e57600080fd5b5051919050565b6001600160a01b038316815260406020808301829052835191830182905260009184820191906060850190845b8181101561285e57845183529383019391830191600101612842565b5090979650505050505050565b60006020828403121561287d57600080fd5b81518015158114610b9557600080fd5b600080604083850312156128a057600080fd5b505080516020909101519092909150565b60008160001904831182151516156128cb576128cb61251c565b500290565b600060208083850312156128e357600080fd5b825167ffffffffffffffff808211156128fb57600080fd5b818501915085601f83011261290f57600080fd5b815181811115612921576129216125c6565b8060051b915061293284830161264b565b818152918301840191848101908884111561294c57600080fd5b938501935b8385101561296a57845182529385019390850190612951565b98975050505050505050565b60005b83811015612991578181015183820152602001612979565b50506000910152565b600082516129ac818460208701612976565b9190910192915050565b60208152600082518060208401526129d5816040850160208701612976565b601f01601f1916919091016040019291505056fe9e45de9588e74df19c5f35dd4ddf9c698e7a3e36b4004fd44cb75621507d7092a26469706673582212202c288a699522a8ece2b9cf6db116af017d3c938cd5dea7f99604701c52253f0c64736f6c63430008100033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100bf5760003560e01c80634f6ccce71161007c5780634f6ccce71461016e5780636352211e1461018157806370a08231146101b757806399fbab88146101e0578063c4664c6314610262578063ddc632621461028e578063e305f306146102a157600080fd5b8063150b7a02146100c457806318160ddd146100f95780632e1a7d4d1461010b5780632f745c5914610120578063331ded1a14610133578063427d743214610146575b600080fd5b6100e36100d2366004612320565b630a85bd0160e11b95945050505050565b6040516100f091906123bf565b60405180910390f35b6003545b6040519081526020016100f0565b61011e6101193660046123d4565b6102c1565b005b6100fd61012e3660046123ed565b610546565b6100fd610141366004612419565b6105bc565b61015961015436600461245a565b6107e8565b604080519283526020830191909152016100f0565b6100fd61017c3660046123d4565b610814565b6101aa61018f3660046123d4565b6000908152602081905260409020546001600160a01b031690565b6040516100f09190612477565b6100fd6101c536600461245a565b6001600160a01b031660009081526001602052604090205490565b6102296101ee3660046123d4565b600060208190529081526040902080546001820154600283015460038401546004909401546001600160a01b03938416949293909116919085565b604080516001600160a01b039687168152602081019590955292909416918301919091526060820152608081019190915260a0016100f0565b6101aa6102703660046123d4565b6000908152602081905260409020600201546001600160a01b031690565b61011e61029c3660046123d4565b610849565b6100fd6102af3660046123d4565b60009081526004602052604090205490565b6000805160206129ea8339815191526102da81336109a8565b600082815260208181526040808320815160a08101835281546001600160a01b03808216835260018401805484880152600285018054928316968501968752600386018054606087015260048701805460808801528c8b52988a90526001600160a01b03199485169096559088905591169055908490559183905551909190610384907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b6060830151608084015184516001600160a01b031660009081526002602052604090209293506103b5929190610a44565b81516001600160a01b031660009081526001602090815260408220908401519091906103e2908390610acd565b915050801561042a578360200151600080848760200151815481106104095761040961248b565b90600052602060002001548152602001908152602001600020600101819055505b600183600181111561043e5761043e6124a1565b0361051a57600086815260046020819052604080832080549390558681015187519151632142170760e11b81526001600160a01b03909116926342842e0e9261048b9230928791016124b7565b600060405180830381600087803b1580156104a557600080fd5b505af11580156104b9573d6000803e3d6000fd5b5050865160408089015160808a015182518d81526001600160a01b0392831660208201529283015290911692507f50065562d2b38b7cc51ee877211c37a54ff469d129d1a67bfeb97e0c2994a316915060600160405180910390a25061053e565b826040516308a8fee960e31b815260040161053591906124db565b60405180910390fd5b505050505050565b6001600160a01b038216600090815260016020526040812054821061057e57604051638f832b9b60e01b815260040160405180910390fd5b6001600160a01b03831660009081526001602052604090208054839081106105a8576105a861248b565b906000526020600020015490505b92915050565b60006000805160206129ea8339815191526105d781336109a8565b60016106037f000000000000000000000000000000000000000000000000000000000000000086610a0b565b6001811115610614576106146124a1565b1461063457836040516337bce3c560e11b81526004016105359190612477565b61065f7f00000000000000000000000000000000000000000000000000000000000000008585610b56565b610680578383604051634eb9917160e11b8152600401610535929190612503565b8360006106ae7f00000000000000000000000000000000000000000000000000000000000000008387610b9c565b905060006106bd888884610beb565b604080516020808201835289825260008481526004825283812092519092556001600160a01b038c16825260029052209091506106fa9083610cb0565b826001600160a01b03166342842e0e61073b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610cd6565b30896040518463ffffffff1660e01b815260040161075b939291906124b7565b600060405180830381600087803b15801561077557600080fd5b505af1158015610789573d6000803e3d6000fd5b505060408051848152602081018a90529081018590526001600160a01b03808b1693508b1691507fb1c56a0ea823a5b59843a1c0223e87b70affc07e96fc346165322958cdef13949060600160405180910390a3979650505050505050565b6001600160a01b0381166000908152600260205260408120819061080b90610db4565b91509150915091565b600061081f60035490565b821061083e57604051633f7ee38f60e11b815260040160405180910390fd5b6105b6826001612532565b6000805160206129ea83398151915261086281336109a8565b600082815260208181526040808320815160a08101835281546001600160a01b0390811682526001830154948201949094526002820154909316918301829052600381015460608401526004015460808301529091906108e3907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b905060018160018111156108f9576108f96124a1565b1461091957806040516308a8fee960e31b815260040161053591906124db565b815160408084015160008781526004602052919091205461095d927f0000000000000000000000000000000000000000000000000000000000000000929091610e05565b837f54c43c33795a11f3152d46be48143a092092361e37f765f6f9da0251aabf1f9683604001516040516109919190612477565b60405180910390a26109a284610e59565b50505050565b6001600160a01b0381166109cf5760405163d92e233d60e01b815260040160405180910390fd5b6109d98282610fff565b610a075760405163889a56bb60e01b81523060048201526001600160a01b0382166024820152604401610535565b5050565b6000610a17838361110a565b15610a24575060016105b6565b610a2e838361113a565b15610a3b575060016105b6565b50600092915050565b6000610a4f8261114e565b9050610a5961115d565b811115610a7c57604051632029102760e21b815260048101829052602401610535565b610a858461116d565b82846000016000828254610a999190612545565b90915550610aa7905061115d565b8110156109a25782846001016000828254610ac29190612545565b909155505050505050565b81546000908190610ae090600190612545565b915050818114801590610b2957838281548110610aff57610aff61248b565b9060005260206000200154848481548110610b1c57610b1c61248b565b6000918252602090912001555b83805480610b3957610b39612558565b600190038181906000526020600020016000905590559250929050565b6000610b62848461110a565b15610b7857610b718483611199565b9050610b95565b610b82848461113a565b15610b9157610b71848361123a565b5060005b9392505050565b6000610ba8848461113a565b15610bb757610b718483611341565b610bc1848461110a565b15610bd057610b7184836113e2565b826040516337bce3c560e11b81526004016105359190612477565b6003805460009182610bfc8361256e565b9091555050600380546040805160a0810182526001600160a01b0397881680825260009081526001602081815284832080548286019081529a8c16858701908152606086019a8b52426080870190815288865285845296852095518654908e166001600160a01b03199182161787559b51868501555160028601805491909d169b169a909a17909a559651948201949094559051600490910155838652845493840185559381529390932001819055919050565b610cb98261116d565b80826000016000828254610ccd9190612532565b90915550505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015610d16573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3a9190612587565b6001600160a01b0316630c0450126000805160206129ea8339815191526040518263ffffffff1660e01b8152600401610d7391906123bf565b602060405180830381865afa158015610d90573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105b69190612587565b6040805160608101825282548152600183015460208201526002830154918101829052600091829190610de561115d565b03610dfb57602081015190519094909350915050565b5193849350915050565b610e0f848361113a565b15610e2457610e1f8484836114e3565b6109a2565b610e2e848361110a565b15610e3e57610e1f84848361175a565b816040516337bce3c560e11b81526004016105359190612477565b600081815260208181526040808320815160a08101835281546001600160a01b039081168252600183015494820194909452600282015490931691830182905260038101546060840152600401546080830152909190610eda907f000000000000000000000000000000000000000000000000000000000000000090610a0b565b90506001816001811115610ef057610ef06124a1565b14610f1057806040516308a8fee960e31b815260040161053591906124db565b6060820151608083015183516001600160a01b03166000908152600260205260409020610f3e929091610a44565b6040808301516000858152600460205291822054610f7d917f000000000000000000000000000000000000000000000000000000000000000091610b9c565b600085815260208181526040808320600301849055608087015187516001600160a01b031684526002909252909120919250610fbb919083906117fd565b837f6a28020abc16896e42077f4597b339d5cdf310f437dee250bcfb161a8539b27a846040015183604051610ff1929190612503565b60405180910390a250505050565b6000816001600160a01b03167f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611069573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061108d9190612587565b6001600160a01b0316630c045012856040518263ffffffff1660e01b81526004016110b891906123bf565b602060405180830381865afa1580156110d5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110f99190612587565b6001600160a01b0316149392505050565b600061111e836001600160a01b031661187b565b6001600160a01b0316826001600160a01b031614905092915050565b600061111e836001600160a01b031661192a565b60006105b662093a80836125a4565b60006111684261114e565b905090565b806002015461117a61115d565b116111825750565b8054600182015561119161115d565b600290910155565b6000806111ae846001600160a01b031661187b565b6001600160a01b031663eb02c301846040518263ffffffff1660e01b81526004016111db91815260200190565b61018060405180830381865afa1580156111f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061121d9190612690565b608001516001811115611232576112326124a1565b149392505050565b60008061124f846001600160a01b031661192a565b6001600160a01b0316638c7a63ae846040518263ffffffff1660e01b815260040161127c91815260200190565b60a060405180830381865afa158015611299573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906112bd9190612751565b8051602082015160405163d972e8ad60e01b81526004810191909152919250906001600160a01b0382169063d972e8ad9060240160a060405180830381865afa15801561130e573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061133291906127ac565b60800151151595945050505050565b600080611356846001600160a01b031661192a565b6001600160a01b0316638c7a63ae846040518263ffffffff1660e01b815260040161138391815260200190565b60a060405180830381865afa1580156113a0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113c49190612751565b9050806060015181604001516113da9190612545565b949350505050565b6000806113f7846001600160a01b031661187b565b6001600160a01b031663aa04295f846040518263ffffffff1660e01b815260040161142491815260200190565b602060405180830381865afa158015611441573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061146591906127fc565b90506113da8161147d866001600160a01b03166119d9565b6001600160a01b031663872697296040518163ffffffff1660e01b8152600401602060405180830381865afa1580156114ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906114de91906127fc565b611a88565b60006114f7846001600160a01b031661192a565b6001600160a01b0316638c7a63ae836040518263ffffffff1660e01b815260040161152491815260200190565b60a060405180830381865afa158015611541573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115659190612751565b805190915061157c6001600160a01b038616611abe565b6001600160a01b0316631852f200856115988560000151611b6d565b6040518363ffffffff1660e01b81526004016115b5929190612815565b602060405180830381865afa1580156115d2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115f6919061286b565b61161557836040516373bb9c8960e01b81526004016105359190612477565b604051632a8a9f1360e21b81526004810184905260009081906001600160a01b0384169063aa2a7c4c9060240160408051808303816000875af1158015611660573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611684919061288d565b90925090506116b9866116978385612532565b6116a98a6001600160a01b0316611ec3565b6001600160a01b03169190611f72565b6116cb876001600160a01b0316611fcd565b6001600160a01b0316632e1a7d4d866040518263ffffffff1660e01b81526004016116f891815260200190565b6020604051808303816000875af1925050508015611733575060408051601f3d908101601f19168201909252611730918101906127fc565b60015b156117515761174f87826116a98b6001600160a01b031661207c565b505b50505050505050565b600061176e846001600160a01b031661187b565b6001600160a01b0316631c4b774b836040518263ffffffff1660e01b815260040161179b91815260200190565b6020604051808303816000875af11580156117ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906117de91906127fc565b905080156109a2576109a283826116a9876001600160a01b031661207c565b60006118088261114e565b905061181261115d565b81111561183557604051632029102760e21b815260048101829052602401610535565b61183e8461116d565b61184661115d565b81101561186757828460010160008282546118619190612532565b90915550505b82846000016000828254610ac29190612532565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156118bb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118df9190612587565b6001600160a01b0316630c0450127f5a31296b3cecaf3aaa3146a140f6ddf6d21caa95e28243dc507d90d7e883be796040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561196a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061198e9190612587565b6001600160a01b0316630c0450127f7c9945d349966e663465dd2ad9f3ebe33d671877c22c40ca3a051e02e14e15ff6040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611a19573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a3d9190612587565b6001600160a01b0316630c0450127fd4a8913f0cbda73931759328604779fb81c2513f90d252b9c4a96a5dd8327d886040518263ffffffff1660e01b8152600401610d7391906123bf565b6000670de0b6b3a7640000611aa0620f4240826125a4565b611aaa91906128b1565b611ab483856128b1565b610b9591906125a4565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611afe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611b229190612587565b6001600160a01b0316630c0450127fc61c93ad97e9ad12d54663c76606860c6c3a3f53a59b88cd4bc1e3f43edc17956040518263ffffffff1660e01b8152600401610d7391906123bf565b606073efeb69edf6b6999b0e3f2fa856a2acf3bdea4ab56001600160a01b0383161480611bb6575073aa2ccc5547f64c5dffd0a624eb4af2543a67ba656001600160a01b038316145b80611bdd575073c9bdd0d3b80cc6efe79a82d850f44ec9b55387ae6001600160a01b038316145b80611c04575073e6c30756136e07eb5268c3232efbfbe645c1ba5a6001600160a01b038316145b80611c2b5750731d596d28a7923a22aa013b0e7082bba23daa656b6001600160a01b038316145b15611c855760015b604051908082528060200260200182016040528015611c5c578160200160208202803683370190505b509050600081600081518110611c7457611c7461248b565b602002602001018181525050919050565b6001600160a01b03821673418749e294cabce5a714efccc22a8aade6f9db5703611cb0576001611c33565b72c27fc71b159a346e179b4a1608a0865e8a74706001600160a01b0383161480611cf6575073d09a57127bc40d680be7cb061c2a6629fe71abef6001600160a01b038316145b15611d51576040805160028082526060820183529091602083019080368337019050509050600081600081518110611d3057611d3061248b565b602002602001018181525050600181600181518110611c7457611c7461248b565b73b26b42dd5771689d0a7faeea32825ff9710b9c116001600160a01b0383161480611d98575073759f097f3153f5d62ff1c2d82ba78b6350f223e36001600160a01b038316145b80611dbf57507389d7c618a4eef3065da8ad684859a547548e61696001600160a01b038316145b15611e5d5760408051600480825260a082019092529060208201608080368337019050509050600081600081518110611dfa57611dfa61248b565b602002602001018181525050600181600181518110611e1b57611e1b61248b565b602002602001018181525050600381600281518110611e3c57611e3c61248b565b602002602001018181525050600481600381518110611c7457611c7461248b565b816001600160a01b031663c78bed866040518163ffffffff1660e01b8152600401600060405180830381865afa158015611e9b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105b691908101906128d0565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611f03573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f279190612587565b6001600160a01b0316630c0450127fd6aca1be9729c13d677335161321649cccae6a591554772516700f986f942eaa6040518263ffffffff1660e01b8152600401610d7391906123bf565b611fc88363a9059cbb60e01b8484604051602401611f91929190612503565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b03199093169290921790915261212b565b505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561200d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120319190612587565b6001600160a01b0316630c0450127f1cd0c2e09edd1d00946872d4dfa90e139030cf08dd8b201be0c3e01ae1534c576040518263ffffffff1660e01b8152600401610d7391906123bf565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156120bc573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906120e09190612587565b6001600160a01b0316630c0450127f6fdcaa094af96c56039c701c590da2284d9e0c364f2dd8ee7d43419f0eefd2936040518263ffffffff1660e01b8152600401610d7391906123bf565b6000612180826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166121fd9092919063ffffffff16565b805190915015611fc8578080602001905181019061219e919061286b565b611fc85760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b6064820152608401610535565b60606113da848460008585843b6122565760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152606401610535565b600080866001600160a01b03168587604051612272919061299a565b60006040518083038185875af1925050503d80600081146122af576040519150601f19603f3d011682016040523d82523d6000602084013e6122b4565b606091505b50915091506122c48282866122cf565b979650505050505050565b606083156122de575081610b95565b8251156122ee5782518084602001fd5b8160405162461bcd60e51b815260040161053591906129b6565b6001600160a01b038116811461231d57600080fd5b50565b60008060008060006080868803121561233857600080fd5b853561234381612308565b9450602086013561235381612308565b935060408601359250606086013567ffffffffffffffff8082111561237757600080fd5b818801915088601f83011261238b57600080fd5b81358181111561239a57600080fd5b8960208285010111156123ac57600080fd5b9699959850939650602001949392505050565b6001600160e01b031991909116815260200190565b6000602082840312156123e657600080fd5b5035919050565b6000806040838503121561240057600080fd5b823561240b81612308565b946020939093013593505050565b60008060006060848603121561242e57600080fd5b833561243981612308565b9250602084013561244981612308565b929592945050506040919091013590565b60006020828403121561246c57600080fd5b8135610b9581612308565b6001600160a01b0391909116815260200190565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b6001600160a01b039384168152919092166020820152604081019190915260600190565b60208101600283106124fd57634e487b7160e01b600052602160045260246000fd5b91905290565b6001600160a01b03929092168252602082015260400190565b634e487b7160e01b600052601160045260246000fd5b808201808211156105b6576105b661251c565b818103818111156105b6576105b661251c565b634e487b7160e01b600052603160045260246000fd5b6000600182016125805761258061251c565b5060010190565b60006020828403121561259957600080fd5b8151610b9581612308565b6000826125c157634e487b7160e01b600052601260045260246000fd5b500490565b634e487b7160e01b600052604160045260246000fd5b60405160e0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b60405290565b60405160c0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b60405160a0810167ffffffffffffffff811182821017156125ff576125ff6125c6565b604051601f8201601f1916810167ffffffffffffffff81118282101715612674576126746125c6565b604052919050565b80516002811061268b57600080fd5b919050565b60008183036101808112156126a457600080fd5b6126ac6125dc565b8351815260c0601f19830112156126c257600080fd5b6126ca612605565b91506020840151825260408401516020830152606084015160408301526080840151606083015260a0840151608083015260c084015160a083015281602082015260e08401516040820152610100840151606082015261272d610120850161267c565b608082015261014084015160a08201526101609093015160c0840152509092915050565b600060a0828403121561276357600080fd5b61276b612628565b825161277681612308565b80825250602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b600060a082840312156127be57600080fd5b6127c6612628565b82518152602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b60006020828403121561280e57600080fd5b5051919050565b6001600160a01b038316815260406020808301829052835191830182905260009184820191906060850190845b8181101561285e57845183529383019391830191600101612842565b5090979650505050505050565b60006020828403121561287d57600080fd5b81518015158114610b9557600080fd5b600080604083850312156128a057600080fd5b505080516020909101519092909150565b60008160001904831182151516156128cb576128cb61251c565b500290565b600060208083850312156128e357600080fd5b825167ffffffffffffffff808211156128fb57600080fd5b818501915085601f83011261290f57600080fd5b815181811115612921576129216125c6565b8060051b915061293284830161264b565b818152918301840191848101908884111561294c57600080fd5b938501935b8385101561296a57845182529385019390850190612951565b98975050505050505050565b60005b83811015612991578181015183820152602001612979565b50506000910152565b600082516129ac818460208701612976565b9190910192915050565b60208152600082518060208401526129d5816040850160208701612976565b601f01601f1916919091016040019291505056fe9e45de9588e74df19c5f35dd4ddf9c698e7a3e36b4004fd44cb75621507d7092a26469706673582212202c288a699522a8ece2b9cf6db116af017d3c938cd5dea7f99604701c52253f0c64736f6c63430008100033",
  "devdoc": {
    "author": "Goldfinch",
    "kind": "dev",
    "methods": {
      "assetAddressOf(uint256)": {
        "params": {
          "positionId": "id of the position"
        },
        "returns": {
          "_0": "asset address of the position"
        }
      },
      "balanceOf(address)": {
        "params": {
          "addr": "address"
        },
        "returns": {
          "_0": "positions held by address"
        }
      },
      "depositERC721(address,address,uint256)": {
        "details": "reverts with InvalidAssetType if `assetAddress` is not an ERC721",
        "params": {
          "assetAddress": "address of the ERC20 address",
          "assetTokenId": "id of the ERC721 asset to add",
          "owner": "address that owns the position"
        },
        "returns": {
          "_0": "id of the newly created position"
        }
      },
      "erc721IdOf(uint256)": {
        "details": "reverts with InvalidAssetType if `assetAddress` is not an ERC721",
        "params": {
          "positionId": "id of the position"
        },
        "returns": {
          "_0": "id of the underlying ERC721 asset"
        }
      },
      "harvest(uint256)": {
        "params": {
          "positionId": "id of the position"
        }
      },
      "onERC721Received(address,address,uint256,bytes)": {
        "details": "Whenever an {IERC721} `tokenId` token is transferred to this contract via {IERC721-safeTransferFrom} by `operator` from `from`, this function is called. It must return its Solidity selector to confirm the token transfer. If any other value is returned or the interface is not implemented by the recipient, the transfer will be reverted. The selector can be obtained in Solidity with `IERC721.onERC721Received.selector`."
      },
      "ownerOf(uint256)": {
        "params": {
          "positionId": "id of the position"
        },
        "returns": {
          "_0": "owner of the position"
        }
      },
      "tokenByIndex(uint256)": {
        "details": "Returns a position ID at a given `index` of all the positions stored by the contract.use with {totalSupply} to enumerate all positions",
        "params": {
          "index": "index to get the position ID at"
        },
        "returns": {
          "_0": "position id"
        }
      },
      "tokenOfOwnerByIndex(address,uint256)": {
        "details": "use with {balanceOf} to enumerate all of `owner`'s positions",
        "params": {
          "index": "index of the owner's balance to get the position ID of",
          "owner": "owner of the positions"
        },
        "returns": {
          "_0": "position id"
        }
      },
      "totalSupply()": {
        "returns": {
          "_0": "number of positions in the ledger"
        }
      },
      "totalsOf(address)": {
        "details": "this is used by Membership to determine how much is eligible in  the current epoch vs the next epoch.",
        "params": {
          "owner": "address owning the positions"
        },
        "returns": {
          "eligibleAmount": "USDC value of positions eligible for rewards",
          "totalAmount": "total USDC value of positions"
        }
      },
      "withdraw(uint256)": {
        "params": {
          "positionId": "id of the position"
        }
      }
    },
    "title": "CapitalLedger",
    "version": 1
  },
  "userdoc": {
    "errors": {
      "IndexGreaterThanTokenSupply()": [
        {
          "notice": "Thrown when querying token supply with an index greater than the supply"
        }
      ],
      "InvalidAsset(address)": [
        {
          "notice": "Thrown when an asset has been requested that does not exist"
        }
      ],
      "InvalidAssetType(uint8)": [
        {
          "notice": "Thrown when called with an invalid asset type for the function. Valid types are defined under CapitalAssetType"
        }
      ],
      "InvalidAssetWithId(address,uint256)": [
        {
          "notice": "Thrown when an asset has been requested that does not exist"
        }
      ],
      "InvalidOwnerIndex()": [
        {
          "notice": "Thrown when depositing from address(0)"
        }
      ],
      "InvalidWithdrawAmount(uint256,uint256)": [
        {
          "notice": "Thrown when withdrawing an invalid amount for a position"
        }
      ],
      "NotGoListed(address)": [
        {
          "notice": "Thrown when trying to harvest a pool token when not go-listed"
        }
      ],
      "ZeroDeposit()": [
        {
          "notice": "Thrown when attempting to deposit nothing"
        }
      ]
    },
    "events": {
      "CapitalERC721Deposit(address,address,uint256,uint256,uint256)": {
        "notice": "Emitted when a new capital erc721 deposit has been made"
      },
      "CapitalERC721Harvest(uint256,address)": {
        "notice": "Emitted when an ERC721 capital asset has been harvested"
      },
      "CapitalERC721Withdrawal(address,uint256,address,uint256)": {
        "notice": "Emitted when a new ERC721 capital withdrawal has been made"
      },
      "CapitalPositionAdjustment(uint256,address,uint256)": {
        "notice": "Emitted when an ERC721 capital asset has been \"kicked\", which may cause the underlying  usdc equivalent value to change."
      }
    },
    "kind": "user",
    "methods": {
      "assetAddressOf(uint256)": {
        "notice": "Get the asset address of the position. Example: For an ERC721 position, this  returns the address of that ERC721 contract."
      },
      "balanceOf(address)": {
        "notice": "Get the number of capital positions held by an address"
      },
      "constructor": {
        "notice": "Construct the contract"
      },
      "depositERC721(address,address,uint256)": {
        "notice": "Account for a deposit of `id` for the ERC721 asset at `assetAddress`."
      },
      "erc721IdOf(uint256)": {
        "notice": "Get the id of the ERC721 asset held by position `id`. Pair this with  `assetAddressOf` to get the address & id of the nft."
      },
      "harvest(uint256)": {
        "notice": "Harvests the associated rewards, interest, and other accrued assets  associated with the asset token. For example, if given a PoolToken asset,  this will collect the GFI rewards (if available), redeemable interest, and  redeemable principal, and send that to the `owner`."
      },
      "ownerOf(uint256)": {
        "notice": "Get the owner of a given position."
      },
      "positions(uint256)": {
        "notice": "Data for positions in the vault. Always has a corresponding entry at the same index in ERC20Data or ERC721 data, but never both."
      },
      "tokenOfOwnerByIndex(address,uint256)": {
        "notice": "Returns a position ID owned by `owner` at a given `index` of its position list"
      },
      "totalSupply()": {
        "notice": "Total number of positions in the ledger"
      },
      "totalsOf(address)": {
        "notice": "Get the USDC value of `owner`s positions, reporting what is currently  eligible and the total amount."
      },
      "withdraw(uint256)": {
        "notice": "Completely withdraw a position"
      }
    },
    "notice": "Track Capital held by owners and ensure the Capital has been accounted for.",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 6201,
        "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
        "label": "positions",
        "offset": 0,
        "slot": "0",
        "type": "t_mapping(t_uint256,t_struct(Position)6192_storage)"
      },
      {
        "astId": 6206,
        "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
        "label": "owners",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_address,t_array(t_uint256)dyn_storage)"
      },
      {
        "astId": 6212,
        "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
        "label": "totals",
        "offset": 0,
        "slot": "2",
        "type": "t_mapping(t_address,t_struct(UserEpochTotal)11072_storage)"
      },
      {
        "astId": 6214,
        "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
        "label": "positionCounter",
        "offset": 0,
        "slot": "3",
        "type": "t_uint256"
      },
      {
        "astId": 6220,
        "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
        "label": "erc721Datas",
        "offset": 0,
        "slot": "4",
        "type": "t_mapping(t_uint256,t_struct(ERC721Data)6195_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_uint256)dyn_storage": {
        "base": "t_uint256",
        "encoding": "dynamic_array",
        "label": "uint256[]",
        "numberOfBytes": "32"
      },
      "t_mapping(t_address,t_array(t_uint256)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => uint256[])",
        "numberOfBytes": "32",
        "value": "t_array(t_uint256)dyn_storage"
      },
      "t_mapping(t_address,t_struct(UserEpochTotal)11072_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct UserEpochTotal)",
        "numberOfBytes": "32",
        "value": "t_struct(UserEpochTotal)11072_storage"
      },
      "t_mapping(t_uint256,t_struct(ERC721Data)6195_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct CapitalLedger.ERC721Data)",
        "numberOfBytes": "32",
        "value": "t_struct(ERC721Data)6195_storage"
      },
      "t_mapping(t_uint256,t_struct(Position)6192_storage)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => struct CapitalLedger.Position)",
        "numberOfBytes": "32",
        "value": "t_struct(Position)6192_storage"
      },
      "t_struct(ERC721Data)6195_storage": {
        "encoding": "inplace",
        "label": "struct CapitalLedger.ERC721Data",
        "members": [
          {
            "astId": 6194,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "assetTokenId",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "32"
      },
      "t_struct(Position)6192_storage": {
        "encoding": "inplace",
        "label": "struct CapitalLedger.Position",
        "members": [
          {
            "astId": 6183,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "owner",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 6185,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "ownedIndex",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 6187,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "assetAddress",
            "offset": 0,
            "slot": "2",
            "type": "t_address"
          },
          {
            "astId": 6189,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "usdcEquivalent",
            "offset": 0,
            "slot": "3",
            "type": "t_uint256"
          },
          {
            "astId": 6191,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "depositTimestamp",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "160"
      },
      "t_struct(UserEpochTotal)11072_storage": {
        "encoding": "inplace",
        "label": "struct UserEpochTotal",
        "members": [
          {
            "astId": 11065,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "totalAmount",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 11068,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "eligibleAmount",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 11071,
            "contract": "contracts/protocol/core/membership/CapitalLedger.sol:CapitalLedger",
            "label": "checkpointedAt",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "96"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}